/* Generated by Spago v0.93.44 */
(()=>{var _c=function(t){return function(e){for(var n=t.length,r=e.length,u=new Array(n*r),a=0,o=0;o<n;o++)for(var l=t[o],i=0;i<r;i++)u[a++]=l(e[i]);return u}};var la={compose:function(t){return function(e){return function(n){return t(e(n))}}}};var G=function(t){return t.identity},Q={identity:function(t){return t},Semigroupoid0:function(){return la}};var kt=!0;var et=function(t){return function(e){return function(n){return t(n)(e)}}},tt=function(t){return function(e){return t}};var gc=function(t){return function(e){for(var n=e.length,r=new Array(n),u=0;u<n;u++)r[u]=t(e[u]);return r}};var B=function(){function t(){}return t.value=new t,t}();var v=function(t){return t.map},ae=function(t){var e=v(t);return function(n){return function(r){return e(r)(n)}}},Nt=function(t){return v(t)(tt(void 0))};var on=function(t){var e=v(t);return function(n){return e(tt(n))}};var St={map:gc};var Rv=G(Q);var ca={apply:_c,Functor0:function(){return St}},dt=function(t){return t.apply},hc=function(t){var e=dt(t),n=v(t.Functor0());return function(r){return function(u){return e(n(tt)(r))(u)}}},pe=function(t){var e=dt(t),n=v(t.Functor0());return function(r){return function(u){return e(n(tt(Rv))(r))(u)}}};var D=function(t){return t.pure};var Zr=function(t){var e=dt(t.Apply0()),n=D(t);return function(r){return function(u){return e(n(r))(u)}}};var yc=typeof Array.prototype.flatMap=="function"?function(t){return function(e){return t.flatMap(e)}}:function(t){return function(e){for(var n=[],r=t.length,u=0;u<r;u++)for(var a=e(t[u]),o=a.length,l=0;l<o;l++)n.push(a[l]);return n}};var Ue=function(t){return t.discard};var sa={bind:yc,Apply0:function(){return ca}},C=function(t){return t.bind},De=function(t){return et(C(t))};var He={discard:function(t){return C(t)}};var Dc=function(t){return function(e){return function(n){for(var r=e,u=n.length,a=u-1;a>=0;a--)r=t(n[a])(r);return r}}},Fc=function(t){return function(e){return function(n){for(var r=e,u=n.length,a=0;a<u;a++)r=t(r)(n[a]);return r}}};var wc=function(t){return function(e){return t.length===0?e:e.length===0?t:t.concat(e)}};var ue=function(t){return t.reflectSymbol};var we=function(t){return function(e){return e[t]}},ve=function(t){return function(e){return function(n){var r={};for(var u in n)({}).hasOwnProperty.call(n,u)&&(r[u]=n[u]);return r[t]=e,r}}};var qe={append:wc};var q=function(t){return t.append};var Mt=function(t){return t.alt};var Tc="\uFFFF",Cc="\0",Mv=Number.POSITIVE_INFINITY,xv=Number.NEGATIVE_INFINITY;var Ou=function(t){return function(e){return function(n){return function(r){return function(u){return r<u?t:r===u?e:n}}}}};var Ec=Ou,Mc=Ou;var xc=Ou;var Bu=function(t){return function(e){return t===e}};var Lc=Bu,Ic=Bu,Nc=Bu;var Sc={eq:Ic},da={eq:Lc},pa={eq:Nc};var Y=function(t){return t.eq};var k=function(){function t(){}return t.value=new t,t}(),U=function(){function t(){}return t.value=new t,t}(),rt=function(){function t(){}return t.value=new t,t}();var pr={eq:function(t){return function(e){return t instanceof k&&e instanceof k||t instanceof U&&e instanceof U||t instanceof rt&&e instanceof rt}}};var Pc=function(t){return function(e){return t-e|0}},Ac=function(t){return function(e){return t-e}};var Wc=function(t){return function(e){return t+e|0}},Uc=function(t){return function(e){return t*e|0}},Hc=function(t){return function(e){return t+e}},$c=function(t){return function(e){return t*e}};var qc=function(t){return t.zeroRecord},be=function(t){return t.zero};var vr={addRecord:function(t){return function(e){return function(n){return{}}}},mulRecord:function(t){return function(e){return function(n){return{}}}},oneRecord:function(t){return function(e){return{}}},zeroRecord:function(t){return function(e){return{}}}};var Oe={add:Hc,zero:0,mul:$c,one:1},va={add:Wc,zero:0,mul:Uc,one:1},Oc=function(t){return t.oneRecord},Be=function(t){return t.one},Bc=function(t){return t.mulRecord},le=function(t){return t.mul},kc=function(t){return t.addRecord},mr=function(){return function(t){return{add:kc(t)(B.value),mul:Bc(t)(B.value),one:Oc(t)(B.value)(B.value),zero:qc(t)(B.value)(B.value)}}},me=function(t){return t.add};var hn=function(t){var e=ue(t);return function(){return function(n){var r=kc(n),u=Bc(n),a=Oc(n),o=qc(n);return function(l){var i=me(l),f=le(l),c=Be(l),p=be(l);return{addRecord:function(m){return function(h){return function(R){var L=r(B.value)(h)(R),W=e(B.value),J=ve(W),st=we(W);return J(i(st(h))(st(R)))(L)}}},mulRecord:function(m){return function(h){return function(R){var L=u(B.value)(h)(R),W=e(B.value),J=ve(W),st=we(W);return J(f(st(h))(st(R)))(L)}}},oneRecord:function(m){return function(h){var R=a(B.value)(B.value),L=e(B.value),W=ve(L);return W(c)(R)}},zeroRecord:function(m){return function(h){var R=o(B.value)(B.value),L=e(B.value),W=ve(L);return W(p)(R)}}}}}}};var Av=mr(),zc=function(t){return t.subRecord},_r=function(t){return t.sub};var ku={subRecord:function(t){return function(e){return function(n){return{}}}},SemiringRecord0:function(){return vr}},ma=function(t){var e=ue(t),n=hn(t)();return function(){return function(r){var u=zc(r),a=n(r.SemiringRecord0());return function(o){var l=_r(o),i=a(o.Semiring0());return{subRecord:function(f){return function(c){return function(p){var m=u(B.value)(c)(p),h=e(B.value),R=ve(h),L=we(h);return R(l(L(c))(L(p)))(m)}}},SemiringRecord0:function(){return i}}}}}},zu=function(){return function(t){var e=Av(t.SemiringRecord0());return{sub:zc(t)(B.value),Semiring0:function(){return e}}}};var _a={sub:Ac,Semiring0:function(){return Oe}},Jc={sub:Pc,Semiring0:function(){return va}};var no=function(){return{compare:Mc(k.value)(rt.value)(U.value),Eq0:function(){return Sc}}}(),_e=function(){return{compare:Ec(k.value)(rt.value)(U.value),Eq0:function(){return da}}}(),ga=function(){return{compare:xc(k.value)(rt.value)(U.value),Eq0:function(){return pa}}}();var z=function(t){return t.compare};var an=function(t){return t.top};var ro={top:Tc,bottom:Cc,Ord0:function(){return ga}};var Rn=function(t){return t.bottom};var jc=function(t){var e=t.toString();return isNaN(e+".0")?e:e+".0"},Xc=function(t){var e=t.charCodeAt(0);if(e<32||e===127){switch(t){case"\x07":return"'\\a'";case"\b":return"'\\b'";case"\f":return"'\\f'";case`
`:return"'\\n'";case"\r":return"'\\r'";case"	":return"'\\t'";case"\v":return"'\\v'"}return"'\\"+e.toString(10)+"'"}return t==="'"||t==="\\"?"'\\"+t+"'":"'"+t+"'"};var Yc=function(t){return function(e){for(var n=[],r=0,u=e.length;r<u;r++)n[r]=t(e[r]);return"["+n.join(",")+"]"}};var ha={show:jc};var Ra={show:Xc};var E=function(t){return t.show},Gu=function(t){return{show:Yc(E(t))}};var Jv=G(Q),d=function(){function t(){}return t.value=new t,t}(),s=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}();var Te=function(t){return function(e){return function(n){if(n instanceof d)return t;if(n instanceof s)return e(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[t.constructor.name,e.constructor.name,n.constructor.name])}}},yn=Te(!0)(tt(!1));var pt={map:function(t){return function(e){return e instanceof s?new s(t(e.value0)):d.value}}};var Kt=function(t){return Te(t)(Jv)},ke=function(){return function(t){if(t instanceof s)return t.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[t.constructor.name])}};var bt=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),gt=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}();var Bn=function(t){return t.defer};var Zc=function(t){return function(e){return t&&e}},tf=function(t){return function(e){return t||e}},ef=function(t){return!t};var Fa=function(t){return t.not};var ao=function(t){return t.ff};var Rr=function(t){return t.disj},Ce={ff:!1,tt:!0,implies:function(t){return function(e){return Rr(Ce)(Fa(Ce)(t))(e)}},conj:Zc,disj:tf,not:ef};var nf=function(t){return Math.min(Math.abs(t),2147483647)},rf=function(t){return function(e){return e===0?0:e>0?Math.floor(t/e):-Math.floor(t/-e)}},of=function(t){return function(e){if(e===0)return 0;var n=Math.abs(e);return(t%n+n)%n}};var af={Ring0:function(){return Jc}};var uo=function(t){return t.mod};var wa={degree:nf,div:rf,mod:of,CommutativeRing0:function(){return af}};var ht=function(t){return t.mempty};var M=function(){function t(e,n){this.value0=e,this.value1=n}return t.create=function(e){return function(n){return new t(e,n)}},t}();var ln=function(t){return t.value1};var cn=function(t){return t.value0};var Ea=function(t){return t};var l1=function(t){var e=Rr(t);return{append:function(n){return function(r){return e(n)(r)}}}};var tl=function(t){var e=l1(t);return{mempty:ao(t),Semigroup0:function(){return e}}};var _=function(t){return t};var el=function(){return _};var sf=el();var kn=function(){return sf};var nl=function(){return function(){return function(){return function(){return function(t){return sf}}}}};var d1=G(Q),p1=Y(pr);var v1=nl()()()(),Vt=function(t){return t.foldr};var Jn=function(t){var e=pe(t.Apply0()),n=D(t);return function(r){var u=Vt(r);return function(a){return u(function(o){return e(a(o))})(n(void 0))}}},fo=function(t){var e=Jn(t);return function(n){return et(e(n))}};var Rt=function(t){return t.foldl};var pf=function(t){var e=Rt(t);return function(n){var r=function(u){return function(a){if(u instanceof d)return new s(a);if(u instanceof s)return new s(function(){var o=p1(n(u.value0)(a))(U.value);return o?u.value0:a}());throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): "+[u.constructor.name,a.constructor.name])}};return e(r)(d.value)}},so=function(t){var e=z(t);return function(n){return pf(n)(e)}};var ol=function(t){var e=Rt(t);return function(n){return e(me(n))(be(n))}};var vf=function(t){var e=Vt(t);return function(n){var r=q(n.Semigroup0()),u=ht(n);return function(a){return e(function(o){return function(l){return r(a(o))(l)}})(u)}}},vt={foldr:Dc,foldl:Fc,foldMap:function(t){return vf(vt)(t)}};var ze=function(t){return t.foldMap};var Gn=function(t){var e=ze(t);return function(n){return v1(Ea)(e(tl(n)))}};var Vn=function(t){var e=Gn(t);return function(n){return e(n)(d1)}};var La=function(t){return t.toUpperCase()};var jn=function(t){return function(e){return e.join(t)}};var br=function(t){return t===""};var mf=function(){function t(u){return[u]}function e(u){return function(a){return[u,a]}}function n(u){return function(a){return function(o){return[u,a,o]}}}function r(u){return function(a){return u.concat(a)}}return function(u){return function(a){return function(o){return function(l){return function(i){function f(c,p){switch(p-c){case 0:return o([]);case 1:return a(t)(l(i[c]));case 2:return u(a(e)(l(i[c])))(l(i[c+1]));case 3:return u(u(a(n)(l(i[c])))(l(i[c+1])))(l(i[c+2]));default:var m=c+Math.floor((p-c)/4)*2;return u(a(r)(f(c,m)))(f(m,p))}}return f(0,i.length)}}}}}}();var Tr=function(t){return t};var ll={map:function(t){return function(e){return t(e)}}};var hf={apply:function(t){return function(e){return t(e)}},Functor0:function(){return ll}},h1={bind:function(t){return function(e){return e(t)}},Apply0:function(){return hf}},R1={pure:Tr,Apply0:function(){return hf}},Rf={Applicative0:function(){return R1},Bind1:function(){return h1}};var Z1=G(Q),Wt=function(t){return t.traverse};var tm=function(t){var e=Wt(t);return function(n){return e(n)(Z1)}},Zt={traverse:function(t){var e=t.Apply0();return mf(dt(e))(v(e.Functor0()))(D(t))},sequence:function(t){return tm(Zt)(t)},Functor0:function(){return St},Foldable1:function(){return vt}};var Mf=function(t){return function(e){var n=Wt(e)(t);return function(r){return function(u){return n(u)(r)}}}};var xf=function(t){return function(){return t}},Lf=function(t){return function(e){return function(){return e(t())()}}};var Nf=function(t){var e=C(t.Bind1()),n=D(t.Applicative0());return function(r){return function(u){return e(u)(function(a){return n(r(a))})}}},Yn=function(t){var e=C(t.Bind1()),n=D(t.Applicative0());return function(r){return function(u){return e(r)(function(a){return e(u)(function(o){return n(a(o))})})}}};var Sf=function(t,e,n){var r=0,u;return function(a){if(r===2)return u;if(r===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+e+", line "+a+")",e,a);return r=1,u=n(),r=2,u}},Tt={Applicative0:function(){return Ct},Bind1:function(){return wn}},wn={bind:Lf,Apply0:function(){return pl(0)}},Ct={pure:xf,Apply0:function(){return pl(0)}},Pf=Sf("functorEffect","Effect",function(){return{map:Zr(Ct)}}),pl=Sf("applyEffect","Effect",function(){return{apply:Yn(Tt),Functor0:function(){return Pf(0)}}}),A=Pf(20),Pa=pl(23);var Xt={liftEffect:G(Q),Monad0:function(){return Tt}},Ut=function(t){return t.liftEffect};function Af(t){return function(e){return function(n){return function(){var r=new Image;r.src=t,r.addEventListener("load",function(){n(r)()},!1),r.addEventListener("error",function(){e()},!1)}}}}function Wf(t,e,n){return function(){var r=document.getElementById(t);return r&&r instanceof HTMLCanvasElement?e(r):n}}function Qn(t){return function(){return t.getContext("2d")}}function mo(t){return function(){return t.width}}function _o(t){return function(){return t.height}}function vl(t){return function(e){return function(){t.width=e}}}function ml(t){return function(e){return function(){t.height=e}}}function Aa(t){return function(){return t.toDataURL()}}function Le(t){return function(e){return function(){t.fillStyle=e}}}function _l(t){return function(e){return function(){t.shadowColor=e}}}function gl(t){return function(e){return function(){t.shadowBlur=e}}}function hl(t){return function(e){return function(){t.shadowOffsetX=e}}}function Rl(t){return function(e){return function(){t.shadowOffsetY=e}}}function Uf(t){return function(e){return function(){t.globalCompositeOperation=e}}}function go(t){return function(){t.beginPath()}}function ho(t){return function(){t.fill()}}function Ro(t){return function(e){return function(n){return function(){t.lineTo(e,n)}}}}function yl(t){return function(e){return function(n){return function(){t.moveTo(e,n)}}}}function Dl(t){return function(){t.closePath()}}function Fl(t){return function(e){return function(){t.rect(e.x,e.y,e.width,e.height)}}}function wl(t){return function(e){return function(){t.clearRect(e.x,e.y,e.width,e.height)}}}function bl(t){return function(e){return function(){t.translate(e.translateX,e.translateY)}}}function Hf(t){return function(e){return function(){t.textAlign=e}}}function $f(t){return function(e){return function(){t.textBaseline=e}}}function Cr(t){return function(e){return function(){t.font=e}}}function yo(t){return function(e){return function(n){return function(r){return function(){t.fillText(e,n,r)}}}}}function Tl(t){return function(){t.save()}}function Cl(t){return function(){t.restore()}}function El(t){return function(e){return function(n){return function(r){return function(u){return function(a){return function(){t.drawImage(e,n,r,u,a)}}}}}}}function Ml(t){return function(e){return function(n){return function(r){return function(u){return function(a){return function(o){return function(l){return function(i){return function(f){return function(){t.drawImage(e,n,r,u,a,o,l,i,f)}}}}}}}}}}}var fm=pe(Pa),Ee=function(){function t(){}return t.value=new t,t}(),sm=function(){function t(){}return t.value=new t,t}(),dm=function(){function t(){}return t.value=new t,t}(),pm=function(){function t(){}return t.value=new t,t}(),vm=function(){function t(){}return t.value=new t,t}(),Ie=function(){function t(){}return t.value=new t,t}(),ie=function(){function t(){}return t.value=new t,t}(),bn=function(){function t(){}return t.value=new t,t}(),Er=function(){function t(){}return t.value=new t,t}(),Mr=function(){function t(){}return t.value=new t,t}(),xr=function(){function t(){}return t.value=new t,t}();var Je=function(){function t(){}return t.value=new t,t}(),mm=function(){function t(){}return t.value=new t,t}(),_m=function(){function t(){}return t.value=new t,t}(),gm=function(){function t(){}return t.value=new t,t}(),hm=function(){function t(){}return t.value=new t,t}(),Rm=function(){function t(){}return t.value=new t,t}(),ym=function(){function t(){}return t.value=new t,t}(),Dm=function(){function t(){}return t.value=new t,t}(),Fm=function(){function t(){}return t.value=new t,t}(),wm=function(){function t(){}return t.value=new t,t}(),bm=function(){function t(){}return t.value=new t,t}(),Tm=function(){function t(){}return t.value=new t,t}(),Cm=function(){function t(){}return t.value=new t,t}(),Em=function(){function t(){}return t.value=new t,t}(),Mm=function(){function t(){}return t.value=new t,t}(),xm=function(){function t(){}return t.value=new t,t}(),Lm=function(){function t(){}return t.value=new t,t}(),Im=function(){function t(){}return t.value=new t,t}(),Nm=function(){function t(){}return t.value=new t,t}(),Sm=function(){function t(){}return t.value=new t,t}(),Pm=function(){function t(){}return t.value=new t,t}(),Am=function(){function t(){}return t.value=new t,t}(),Wm=function(){function t(){}return t.value=new t,t}(),Um=function(){function t(){}return t.value=new t,t}(),Hm=function(){function t(){}return t.value=new t,t}(),$m=function(){function t(){}return t.value=new t,t}(),yt=function(t){return function(e){return function(){Tl(t)();var r=e();return Cl(t)(),r}}},Ll=function(t){return function(e){return Af(t)(e(d.value))(function(n){return e(s.create(n))})}};var Lr=function(t){return function(e){var n=function(r){if(r instanceof Ee)return"top";if(r instanceof sm)return"hanging";if(r instanceof dm)return"middle";if(r instanceof pm)return"alphabetic";if(r instanceof vm)return"ideographic";if(r instanceof Ie)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[r.constructor.name])};return $f(t)(n(e))}},Ir=function(t){return function(e){var n=function(r){if(r instanceof ie)return"left";if(r instanceof bn)return"right";if(r instanceof Er)return"center";if(r instanceof Mr)return"start";if(r instanceof xr)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[r.constructor.name])};return Hf(t)(n(e))}};var kf=function(t){return function(e){var n=function(r){if(r instanceof Je)return"source-over";if(r instanceof mm)return"source-in";if(r instanceof _m)return"source-out";if(r instanceof gm)return"source-atop";if(r instanceof hm)return"destination-over";if(r instanceof Rm)return"destination-in";if(r instanceof ym)return"destination-out";if(r instanceof Dm)return"destination-atop";if(r instanceof Fm)return"lighter";if(r instanceof wm)return"copy";if(r instanceof bm)return"xor";if(r instanceof Tm)return"multiply";if(r instanceof Cm)return"screen";if(r instanceof Em)return"overlay";if(r instanceof Mm)return"darken";if(r instanceof xm)return"lighten";if(r instanceof Lm)return"color-dodge";if(r instanceof Im)return"color-burn";if(r instanceof Nm)return"hard-light";if(r instanceof Sm)return"soft-light";if(r instanceof Pm)return"difference";if(r instanceof Am)return"exclusion";if(r instanceof Wm)return"hue";if(r instanceof Um)return"saturation";if(r instanceof Hm)return"color";if(r instanceof $m)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[r.constructor.name])};return Uf(t)(n(e))}},Il=function(t){return function(e){return fm(ml(t)(e.height))(vl(t)(e.width))}},Nl=function(t){return Wf(t,s.create,d.value)},zf=function(t){return function(){var n=mo(t)(),r=_o(t)();return{width:n,height:r}}},Jf=function(t){return function(e){return function(){go(t)();var r=e();return ho(t)(),r}}};var Wa=isFinite;function Gf(t,e,n,r){var u=parseFloat(t);return e(u)?n(u):r}var Nr=Math.round;var Ua=Math.tan;var Vf=3.141592653589793;var Ha=function(t){return Gf(t,Wa,s.create,d.value)};var $a=function(t){return function(e){return e(function(n){return t(n)})}},Ge=function(t){return function(e){return{x:e.x+t.translateX,y:e.y+t.translateY}}};var Dt=function(t){return t.translate},jf=function(t){return function(e){return{width:e.width*t.scaleX,height:e.height*t.scaleY}}},Sl=function(t){return t.scale},Xf=function(t){var e=Sl(t);return function(n){return e({scaleX:n,scaleY:n})}},Ft=function(t){return t.position},Ht=function(t){return function(e){return function(n){return n(t)(e)}}},Gm=function(t){var e=v(t);return function(n){return $a(function(r){var u=e(Ht(r)),a=n(r);return function(o){return u(a(o))}})}};var sn=function(t){return t.mapLayerWrapper},wt=function(t){return t.draw},Yf=function(t){var e=Dt(t);return function(n){return function(r){return function(u){var a={translateX:r.translateX-n.offsetX,translateY:r.translateY-n.offsetY};return e(a)(u)}}}},te=function(t){var e=D(t);return function(n){var r=Yf(n);return function(u){return function(a){return function(o){if(u instanceof d)return e(o);if(u instanceof s)return r(u.value0)(a)(o);throw new Error("Failed pattern match at Template.Layer (line 61, column 1 - line 61, column 115): "+[u.constructor.name,a.constructor.name,o.constructor.name])}}}}},$t=function(t){return t.dragStart},qt=function(t){return t.dragEnd},ee=function(t){return t.drag},Lt=function(t){return t.containsPoint},Tn=function(t){var e=Gm(t);return{position:$a(function(n){return Ft(n)}),translate:function(n){return e(function(r){return Dt(r)(n)})},containsPoint:function(n){return $a(function(r){return Lt(r)(n)})},draw:function(n){return $a(function(r){return wt(r)(n)})},dragStart:function(n){return e(function(r){return $t(r)(n)})},drag:function(n){return e(function(r){return ee(r)(n)})},dragEnd:e(function(n){return qt(n)})}};var Kf=function(t){return function(e){return function(n){return function(r){return{position:t,dimensions:e,angle:n,fillStyle:r,dragOffset:d.value}}}}},Qf=function(t){return t*Vf/180},Pl=function(t){var e=t.Applicative0(),n=D(e),r=te(e);return{position:function(u){return n(u.position)},translate:function(u){return function(a){return n({dimensions:a.dimensions,angle:a.angle,fillStyle:a.fillStyle,dragOffset:a.dragOffset,position:Ge(u)(a.position)})}},containsPoint:function(u){return function(a){var o=(a.dimensions.height-u.y)/Ua(Qf(a.angle));return n(a.position.x+o<=u.x&&u.x<=a.position.x+a.dimensions.width&&a.position.y<=u.y&&u.y<=a.position.y+a.dimensions.height)}},draw:function(u){return function(a){return yt(u)(function(){return Le(u)(a.fillStyle)(),go(u)(),yl(u)(a.position.x)(a.position.y+a.dimensions.height)(),Ro(u)(a.position.x+a.dimensions.width)(a.position.y+a.dimensions.height)(),Ro(u)(a.position.x+a.dimensions.width)(a.position.y)(),Ro(u)(a.position.x+a.dimensions.height/Ua(Qf(a.angle)))(a.position.y)(),Dl(u)(),ho(u)()})}},dragStart:function(u){return function(a){return n({position:a.position,dimensions:a.dimensions,angle:a.angle,fillStyle:a.fillStyle,dragOffset:new s(u)})}},drag:function(u){return function(a){return r(Pl(t))(a.dragOffset)(u)(a)}},dragEnd:function(u){return n({position:u.position,dimensions:u.dimensions,angle:u.angle,fillStyle:u.fillStyle,dragOffset:d.value})}}};var Zf=function(t,e){for(var n=t>e?-1:1,r=new Array(n*(e-t)+1),u=t,a=0;u!==e;)r[a++]=u,u+=n;return r[a]=u,r},jm=function(t,e){if(t<1)return[];var n=new Array(t);return n.fill(e)},Xm=function(t,e){for(var n=[],r=0,u=0;u<t;u++)n[r++]=e;return n},Ym=typeof Array.prototype.fill=="function"?jm:Xm,ts=function(){function t(u,a){this.head=u,this.tail=a}var e={};function n(u){return function(a){return new t(u,a)}}function r(u){for(var a=[],o=0,l=u;l!==e;)a[o++]=l.head,l=l.tail;return a}return function(u,a){return r(u(n)(e)(a))}}(),It=function(t){return t.length};var es=function(t,e,n,r){return r<0||r>=n.length?e:t(n[r])};var ns=function(t,e,n,r){for(var u=0,a=r.length;u<a;u++)if(n(r[u]))return t(u);return e};var rs=function(t,e,n,r,u){if(n<0||n>=u.length)return e;var a=u.slice();return a[n]=r,t(a)},Cn=function(t){return t.slice().reverse()},En=function(t){if(t.length<=1e4)return Array.prototype.concat.apply([],t);for(var e=[],n=0,r=t.length;n<r;n++)for(var u=t[n],a=0,o=u.length;a<o;a++)e.push(u[a]);return e};var os=function(t,e,n){for(var r=n.length,u=e,a=new Array(r),o=0;o<r;o++)u=t(u)(n[o]),a[o]=u;return a};var as=function(t,e,n){return n.slice(t,e)},us=function(t,e,n){for(var r=e.length<n.length?e.length:n.length,u=new Array(r),a=0;a<r;a++)u[a]=t(e[a])(n[a]);return u},ls=function(t,e){for(var n=e.length,r=0;r<n;r++)if(t(e[r]))return!0;return!1},is=function(t,e){for(var n=e.length,r=0;r<n;r++)if(!t(e[r]))return!1;return!0};var cs=function(t){return function(){return{value:t}}};var ce=function(t){return function(){return t.value}},fs=function(t){return function(e){return function(){var n=t(e.value);return e.value=n.state,n.value}}},Pr=function(t){return function(e){return function(){e.value=t}}};var Zm=Nt(A),Mn=cs,t_=fs,Al=function(t){return t_(function(e){var n=t(e);return{state:n,value:n}})},Wl=function(t){return function(e){return Zm(Al(t)(e))}};var fe=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),se=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),dn=function(t){return t.tailRecM};var r_=function(t){var e=function(n){var r=!1,u;function a(o){if(o instanceof fe){n=t(o.value0);return}if(o instanceof se)return r=!0,o.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[o.constructor.name])}for(;!r;)u=a(n);return u};return function(n){return e(t(n))}};var ss={tailRecM:function(t){var e=function(r){return r},n=r_(function(r){return e(t(r))});return function(r){return Tr(n(r))}},Monad0:function(){return Rf}};function i_(t){return t}var ms=i_;function c_(t){return t.slice()}var _s=c_;var gs=function(t,e){return e.push(t)};var Oa=function(e){return function(n){return function(){return e(n)}}},Ul=function(e){return function(n){return function(r){return function(){return e(n,r)}}}};var hs=Oa(ms);var __=Oa(_s),Rs=function(t){return function(e){return function(){var r=__(e)();return t(r)(),hs(r)()}}};var Hl=Ul(gs);var Fo=function(t){return function(e,n,r,u,a){return t(e)(n)(r)(u)(a)}};var xn=function(t){return function(e){return function(n){return t(e,n)}}},wo=function(t){return function(e){return function(n){return function(r){return t(e,n,r)}}}},Ba=function(t){return function(e){return function(n){return function(r){return function(u){return t(e,n,r,u)}}}}},$l=function(t){return function(e){return function(n){return function(r){return function(u){return function(a){return t(e,n,r,u,a)}}}}}};var Fs=function(t){return function(e){return function(n){return function(r){return function(u){return function(a){for(var o=[],l=a;;){var i=u(l);if(t(i))return o;var f=e(i);o.push(n(f)),l=r(f)}}}}}}};var ws=function(t){return function(e){return function(n){return function(r){return function(u){return function(a){for(var o=[],l=a;;){var i=u(l);o.push(n(i));var f=r(i);if(t(f))return o;l=e(f)}}}}}}};var x_=ke();var ql={unfoldr1:ws(yn)(x_)(cn)(ln)};var N_=ke(),pn=function(t){return t.unfoldr};var Bl={unfoldr:Fs(yn)(N_)(cn)(ln),Unfoldable10:function(){return ql}};var S_=q(qe);var Ms=wo(us);var je=function(){return Ms(M.create)}();var xs=function(){return $l(rs)(s.create)(d.value)}();var Ot=function(t){return function(e){return Rs(Hl(e))(t)()}},kl=wo(as),Co=function(t){return function(e){return t<=0?{before:[],after:e}:{before:kl(0)(t)(e),after:kl(t)(It(e))(e)}}};var Jl=function(t){return[t]};var Wr=wo(os);var Gl=xn(Zf);var Xe=function(){return Ba(es)(s.create)(d.value)}();var Vl=function(t){return function(e){return function(n){var r=function(u){return xs(t)(e(u))(n)};return Te(d.value)(r)(Xe(n)(t))}}};var jl=function(t){return xn(ts)(Vt(t))};var Eo=function(){return Ba(ns)(s.create)(d.value)}();var Xl=function(t){var e=Y(t);return function(n){return Eo(function(r){return e(r)(n)})}},Yl=function(t){var e=Xl(t);return function(n){return function(r){return yn(e(n)(r))}}};var Zn=function(t){return function(e){return S_([t])(e)}};var Ls=et(C(sa));var Mo=xn(ls);var Ga=xn(is);var P_=Vn(vt)(Ce),A_=Wt(Zt),W_=_r(zu()(ma({reflectSymbol:function(){return"x"}})()(ma({reflectSymbol:function(){return"y"}})()(ku)(_a))(_a))),U_=Jn(Ct)(vt);var Ql=function(t){var e=t.Applicative0(),n=D(e),r=t.Bind1().Apply0().Functor0(),u=v(r),a=A_(e),o=Tn(r),l=Lt(o),i=wt(o),f=te(e);return{position:function(c){return n(c.position)},translate:function(c){return function(p){return n({layers:p.layers,dragOffset:p.dragOffset,position:Ge(c)(p.position)})}},containsPoint:function(c){return function(p){return u(P_)(a(l(W_(c)(p.position)))(p.layers))}},draw:function(c){return function(p){return yt(c)(function(){return bl(c)({translateX:p.position.x,translateY:p.position.y})(),U_(function(){var h=yt(c),R=i(c);return function(L){return h(R(L))}}())(Cn(p.layers))()})}},dragStart:function(c){return function(p){return n({layers:p.layers,position:p.position,dragOffset:new s(c)})}},drag:function(c){return function(p){return f(Ql(t))(p.dragOffset)(c)(p)}},dragEnd:function(c){return n({layers:c.layers,position:c.position,dragOffset:d.value})}}},Kl=function(t){return{layers:t,position:{x:0,y:0},dragOffset:d.value}};var xo=t=>t.width,Lo=t=>t.height;var tr=t=>e=>()=>t.letterSpacing=e;var Is=function(t){return function(e){return function(n){return function(r){return El(t)(e)(n.x)(n.y)(r.width)(r.height)}}}};var Zl=function(t){return{width:xo(t),height:Lo(t)}};var q_=le(mr()(hn({reflectSymbol:function(){return"scaleX"}})()(hn({reflectSymbol:function(){return"scaleY"}})()(vr)(Oe))(Oe))),O_=Ue(He),B_=v(pt);var Ns=function(t){var e=D(t.Monad0().Applicative0());return{scale:function(n){return function(r){return e({image:r.image,position:r.position,composite:r.composite,dragOffset:r.dragOffset,scale:q_(n)(r.scale)})}}}},Va=function(t){var e=t.Monad0(),n=e.Applicative0(),r=D(n),u=C(e.Bind1()),a=Ut(t),o=te(n);return{position:function(l){return r(l.position)},translate:function(l){return function(i){return r({image:i.image,scale:i.scale,composite:i.composite,dragOffset:i.dragOffset,position:Ge(l)(i.position)})}},containsPoint:function(l){return function(i){return u(a(ce(i.image)))(function(f){if(f instanceof d)return r(!1);if(f instanceof s)return r(i.position.x<=l.x&&l.x<=i.position.x+xo(f.value0)*i.scale.scaleX&&i.position.y<=l.y&&l.y<=i.position.y+Lo(f.value0)*i.scale.scaleY);throw new Error("Failed pattern match at Template.Layer.Image (line 74, column 5 - line 80, column 90): "+[f.constructor.name])})}},dragStart:function(l){return function(i){return r({image:i.image,position:i.position,scale:i.scale,composite:i.composite,dragOffset:new s(l)})}},drag:function(l){return function(i){return o(Va(t))(i.dragOffset)(l)(i)}},dragEnd:function(l){return r({image:l.image,position:l.position,scale:l.scale,composite:l.composite,dragOffset:d.value})},draw:function(l){return function(i){return function(){var c=ce(i.image)();if(c instanceof d)return void 0;if(c instanceof s)return yt(l)(function(){return kf(l)(i.composite)(),Is(l)(c.value0)(i.position)(jf(i.scale)(Zl(c.value0)))()})();throw new Error("Failed pattern match at Template.Layer.Image (line 88, column 5 - line 94, column 54): "+[c.constructor.name])}}}}},Ss=function(t){return function(e){return{image:e.image,position:e.position,composite:e.composite,dragOffset:e.dragOffset,scale:t}}},ei=function(t){var e=Ut(t);return function(n){return function(r){return function(u){return function(a){return e(function(){var l=Mn(d.value)();return Ll(n)(function(){var i=et(Wl)(l);return function(f){return i(tt(f))}}())(),{image:l,position:r,scale:u,composite:a,dragOffset:d.value}})}}}}},Ps=function(t){var e=Ut(t);return function(n){return function(r){return function(u){return e(function(){var o=Mn(d.value)();return{image:o,position:n,scale:r,composite:u,dragOffset:d.value}})}}}},As=function(t){var e=t.Monad0(),n=O_(e.Bind1()),r=Ut(t),u=D(e.Applicative0());return function(a){return function(o){return n(r(Ll(a)(function(){var l=et(Wl)(o.image);return function(i){return l(tt(i))}}())))(function(){return u(o)})}}},Ws=function(t){return t.scale},Us=function(t){var e=t.Monad0(),n=C(e.Bind1()),r=Ut(t),u=D(e.Applicative0());return function(a){return n(r(ce(a.image)))(function(o){return u(B_(Zl)(o))})}};var er=function(t){return t.throwError};var Se=function(t){return t.lift};var Y_=v(pt);var Xa=function(t){return t},Ln=function(t){return t};var Hr={lift:function(t){var e=Nf(t)(s.create);return function(n){return Xa(e(n))}}};var Q_=function(t){var e=v(t);return{map:function(n){return function(r){return e(Y_(n))(r)}}}},K_=function(t){return{Applicative0:function(){return No(t)},Bind1:function(){return nr(t)}}},nr=function(t){var e=C(t.Bind1()),n=D(t.Applicative0());return{bind:function(r){return function(u){return e(r)(function(a){if(a instanceof d)return n(d.value);if(a instanceof s){var o=u(a.value0);return o}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 55, column 11 - line 57, column 42): "+[a.constructor.name])})}},Apply0:function(){return zs(t)}}},zs=function(t){var e=Q_(t.Bind1().Apply0().Functor0());return{apply:Yn(K_(t)),Functor0:function(){return e}}},No=function(t){return{pure:function(){var e=D(t.Applicative0());return function(n){return Xa(e(s.create(n)))}}(),Apply0:function(){return zs(t)}}};var $r=function(t){var e=D(t.Applicative0());return function(n){return Xa(e(n))}};var Z_=Se(Hr);var Js=function(t){var e=C(nr(t)),n=$r(t),r=Z_(t);return function(u){return function(a){return function(o){return e(n(Xe(o)(u)))(function(l){return e(r(a(l)))(function(i){return n(Vl(u)(tt(i))(o))})})}}}};var ui=function(t){return je(Gl(0)(It(t)))(t)};var tg=Wt(Zt),eg=Vn(vt)(Ce),ng=Jn(Ct)(vt),rg=Se(Hr),og=G(Q);var Vs=function(t){var e=t.Applicative0(),n=t.Bind1().Apply0().Functor0(),r=ae(n),u=tg(e),a=Tn(n),o=Dt(a),l=v(n),i=Lt(a),f=wt(a),c=C(nr(t)),p=rg(t),m=$r(t),h=Ft(a),R=Js(t),L=$t(a),W=D(No(t)),J=ee(a),st=qt(a);return{position:tt(D(e)({x:0,y:0})),translate:function($){return function(Z){return r(u(o($))(Z.layers))(function(_t){return{dragIndex:Z.dragIndex,layers:_t}})}},containsPoint:function($){return function(Z){return l(eg)(u(i($))(Z.layers))}},draw:function($){return function(Z){return ng(function(){var _t=yt($),ct=f($);return function(rn){return _t(ct(rn))}}())(Cn(Z.layers))}},dragStart:function($){return function(Z){return l(Kt(Z))(Ln(c(p(u(i({x:$.offsetX,y:$.offsetY}))(Z.layers)))(function(_t){return c(m(Eo(og)(_t)))(function(ct){return c(m(Xe(Z.layers)(ct)))(function(rn){return c(p(h(rn)))(function(On){return c(R(ct)(L({offsetX:$.offsetX-On.x,offsetY:$.offsetY-On.y}))(Z.layers))(function(dr){return W({dragIndex:new s(ct),layers:dr})})})})})})))}},drag:function($){return function(Z){return l(Kt(Z))(Ln(c(m(Z.dragIndex))(function(_t){return c(m(Xe(Z.layers)(_t)))(function(ct){return c(p(h(ct)))(function(rn){return c(R(_t)(J({translateX:$.translateX-rn.x,translateY:$.translateY-rn.y}))(Z.layers))(function(On){return W({dragIndex:Z.dragIndex,layers:On})})})})})))}},dragEnd:function($){return l(Kt({layers:$.layers,dragIndex:d.value}))(Ln(c(m($.dragIndex))(function(Z){return c(R(Z)(st)($.layers))(function(_t){return W({dragIndex:d.value,layers:_t})})})))}}},So=function(t){return{layers:t,dragIndex:d.value}};var li=function(t){var e=D(t),n=te(t);return{position:function(r){return e({x:r.rect.x,y:r.rect.y})},translate:function(r){return function(u){return e({fillStyle:u.fillStyle,dragOffset:u.dragOffset,rect:{width:u.rect.width,height:u.rect.height,x:u.rect.x+r.translateX,y:u.rect.y+r.translateY}})}},containsPoint:function(r){return function(u){return e(u.rect.x<=r.x&&r.x<=u.rect.x+u.rect.width&&u.rect.y<=r.y&&r.y<=u.rect.y+u.rect.height)}},draw:function(r){return function(u){return function(){return Le(r)(u.fillStyle)(),Jf(r)(Fl(r)(u.rect))()}}},dragStart:function(r){return function(u){return e({rect:u.rect,fillStyle:u.fillStyle,dragOffset:new s(r)})}},drag:function(r){return function(u){return n(li(t))(u.dragOffset)(r)(u)}},dragEnd:function(r){return e({rect:r.rect,fillStyle:r.fillStyle,dragOffset:d.value})}}},ii=function(t){return function(e){return{rect:t,fillStyle:e,dragOffset:d.value}}};var lg=Ue(He),ci=function(t){var e=t.Monad0(),n=e.Bind1(),r=C(n),u=Ut(t),a=lg(n),o=D(e.Applicative0());return function(l){return function(i){return r(u(ce(i)))(function(f){return r(l(f))(function(c){return a(u(Pr(c)(i)))(function(){return o(c)})})})}}},js=function(t){var e=on(t.Monad0().Bind1().Apply0().Functor0()),n=ci(t);return function(r){return function(u){return e(void 0)(n(r)(u))}}};var cg=De(wn),fg=function(t){return t};var Po=function(t){var e=t.Monad0().Bind1(),n=De(e),r=Ut(t),u=on(e.Apply0().Functor0()),a=ci(t);return function(o){var l=Ft(o),i=Dt(o),f=Lt(o),c=$t(o),p=ee(o),m=qt(o),h=wt(o);return{position:function(R){return n(l)(r(ce(R)))},translate:function(R){return function(L){return u(L)(a(i(R))(L))}},containsPoint:function(R){return function(L){return n(f(R))(r(ce(L)))}},dragStart:function(R){return function(L){return u(L)(a(c(R))(L))}},drag:function(R){return function(L){return u(L)(a(p(R))(L))}},dragEnd:function(R){return u(R)(a(m)(R))},draw:function(R){return function(L){return cg(h(R))(ce(L))}}}}};var Xs=function(t){var e=js(t);return function(n){return function(r){return e(n)(r)}}};var sg=function(t){var e=Ut(t);return function(n){return function(r){return e(Al(n)(r))}}},Ys=function(t){var e=on(t.Monad0().Bind1().Apply0().Functor0()),n=sg(t);return function(r){return function(u){return e(void 0)(n(r)(u))}}},Qa=function(t){var e=v(t.Monad0().Bind1().Apply0().Functor0()),n=Ut(t);return function(r){return e(fg)(n(Mn(r)))}};var dg={mapLayerWrapper:function(t){return function(e){var n=ae(e.Bind1().Apply0().Functor0());return function(r){return function(u){return n(r(u.layer))(function(a){return{offset:u.offset,color:u.color,blur:u.blur,layer:a}})}}}}},pg=sn(dg),Ks=function(t){var e=Ft(t),n=pg(t),r=Dt(t),u=Lt(t),a=$t(t),o=ee(t),l=qt(t),i=wt(t);return function(f){var c=n(f);return{position:function(p){return e(p.layer)},translate:function(p){return c(r(p))},containsPoint:function(p){return function(m){return u(p)(m.layer)}},dragStart:function(p){return c(a(p))},drag:function(p){return c(o(p))},dragEnd:c(l),draw:function(p){return function(m){return yt(p)(function(){return gl(p)(m.blur)(),hl(p)(m.offset.offsetX)(),Rl(p)(m.offset.offsetY)(),_l(p)(m.color)(),i(p)(m.layer)()})}}}}};var fi=function(t){return function(e){return{layer:e.layer,offset:e.offset,blur:e.blur,color:t}}},si=function(t){return function(e){return function(n){return function(r){return{layer:r,offset:t,color:e,blur:n}}}}};var mg={mapLayerWrapper:function(t){return function(e){var n=ae(e.Bind1().Apply0().Functor0());return function(r){return function(u){return n(r(u.layer))(function(a){return{offsetY:u.offsetY,gridSizeY:u.gridSizeY,layer:a}})}}}}},_g=sn(mg),gg={mapLayerWrapper:function(t){return function(e){var n=ae(e.Bind1().Apply0().Functor0());return function(r){return function(u){return n(r(u.layer))(function(a){return{offsetX:u.offsetX,gridSizeX:u.gridSizeX,layer:a}})}}}}},hg=sn(gg);var di=function(t){return function(e){return function(n){return{layer:n,gridSizeY:e,offsetY:t}}}},Zs=function(t){return function(e){return function(n){return{layer:n,gridSizeX:e,offsetX:t}}}};var Rg=function(t){var e=Ft(t),n=ee(t);return function(r){var u=C(r.Bind1());return function(a){return function(o){return function(l){return function(i){return u(e(i))(function(f){var c=a+o*Nr((f.y+l.translateY-a)/o);return n({translateX:l.translateX,translateY:c-f.y})(i)})}}}}}},td=function(t){var e=Ft(t),n=_g(t),r=Dt(t),u=Lt(t),a=$t(t),o=Rg(t),l=qt(t),i=wt(t);return function(f){var c=n(f),p=o(f);return{position:function(m){return e(m.layer)},translate:function(m){return c(r(m))},containsPoint:function(m){return function(h){return u(m)(h.layer)}},dragStart:function(m){return c(a(m))},drag:function(m){return function(h){return c(p(h.offsetY)(h.gridSizeY)(m))(h)}},dragEnd:c(l),draw:function(m){return function(h){return i(m)(h.layer)}}}}},yg=function(t){var e=Ft(t),n=ee(t);return function(r){var u=C(r.Bind1());return function(a){return function(o){return function(l){return function(i){return u(e(i))(function(f){var c=a+o*Nr((f.x+l.translateX-a)/o);return n({translateX:c-f.x,translateY:l.translateY})(i)})}}}}}},ed=function(t){var e=Ft(t),n=hg(t),r=Dt(t),u=Lt(t),a=$t(t),o=yg(t),l=qt(t),i=wt(t);return function(f){var c=n(f),p=o(f);return{position:function(m){return e(m.layer)},translate:function(m){return c(r(m))},containsPoint:function(m){return function(h){return u(m)(h.layer)}},dragStart:function(m){return c(a(m))},drag:function(m){return function(h){return c(p(h.offsetX)(h.gridSizeX)(m))(h)}},dragEnd:c(l),draw:function(m){return function(h){return i(m)(h.layer)}}}}};var lt=function(t){return t};function nd(t){return t.split(/\r\n|[\n\v\f\r\u0085\u2028\u2029]/)}function rd(t){return t.split(/[\u000a-\u000d\u0085\u2028\u2029\u0009\u0020\u00a0\u1680\u2000-\u200a\u202f\u205f\u3000]+/)}var bF=typeof Array.from=="function",Cg=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",TF=typeof String.prototype.fromCodePoint=="function",Eg=typeof String.prototype.codePointAt=="function",od=function(t){return Eg?function(e){return e.codePointAt(0)}:t},ad=function(t){return function(e){return function(n){return function(r){return function(u){return function(a){var o=a.length;if(u<0||u>=o)return n;if(Cg)for(var l=a[Symbol.iterator](),i=u;;--i){var f=l.next();if(f.done)return n;if(i===0)return e(r(f.value))}return t(u)(a)}}}}}};function Nn(t){return t.charCodeAt(0)}function ud(t){return String.fromCharCode(t)}var cd=Rn(ro),fd=an(ro);var mn=function(t){return t.toEnum};var Sn=function(t){return t.fromEnum};var rr=function(t){return function(e){return function(n){return t(e(n)+1|0)}}},or=function(t){return function(e){return function(n){return t(e(n)-1|0)}}};var pi=function(t){return t>=Nn(cd)&&t<=Nn(fd)?new s(ud(t)):d.value},Pg={succ:rr(pi)(Nn),pred:or(pi)(Nn),Ord0:function(){return ga}};var Wo=function(){return{cardinality:Nn(fd)-Nn(cd)|0,toEnum:pi,fromEnum:Nn,Bounded0:function(){return ro},Enum1:function(){return Pg}}}();var vi=function(t){return t.join("")};var Pn=function(t){return t.length};var ar=function(t){return function(e){return e.substring(t)}};var An=function(t){return function(e){if(t>=0&&t<e.length)return e.charAt(t);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var Og=function(t,e,n){var r=0,u;return function(a){if(r===2)return u;if(r===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+e+", line "+a+")",e,a);return r=1,u=n(),r=2,u}},Uo=Sn(Wo);var Bg=z(_e);var pd=function(t){return function(e){return(((t-55296|0)*1024|0)+(e-56320|0)|0)+65536|0}};var vd=function(t){return 56320<=t&&t<=57343},md=function(t){return 55296<=t&&t<=56319},Ka=function(t){var e=Pn(t);if(e===0)return d.value;if(e===1)return new s({head:Uo(An(0)(t)),tail:""});var n=Uo(An(1)(t)),r=Uo(An(0)(t)),u=md(r)&&vd(n);return u?new s({head:pd(r)(n),tail:ar(2)(t)}):new s({head:r,tail:ar(1)(t)})};var kg=function(t){var e=Uo(An(0)(t)),n=md(e)&&Pn(t)>1;if(n){var r=Uo(An(1)(t)),u=vd(r);return u?pd(e)(r):e}return e},dd=od(kg);var _i={eq:function(t){return function(e){return t===e}}},gi={compare:function(t){return function(e){return Bg(t)(e)}},Eq0:function(){return _i}};var zg=function(t){return function(e){var n=t,r=!1,u;function a(o,l){var i=Ka(l);if(i instanceof s){var f=o===0;if(f)return r=!0,new s(i.value0.head);n=o-1|0,e=i.value0.tail;return}return r=!0,d.value}for(;!r;)u=a(n,e);return u}},_d=function(t){return function(e){return t<0?d.value:t===0&&e===""?d.value:t===0?new s(dd(e)):ad(zg)(s.create)(d.value)(dd)(t)(e)}},Jg={bottom:0,top:1114111,Ord0:function(){return gi}},ur=function(){return{cardinality:1114112,fromEnum:function(t){return t},toEnum:function(t){if(t>=0&&t<=1114111)return new s(t);if(kt)return d.value;throw new Error("Failed pattern match at Data.String.CodePoints (line 63, column 1 - line 68, column 26): "+[t.constructor.name])},Bounded0:function(){return Jg},Enum1:function(){return Gg(0)}}}(),Gg=Og("enumCodePoint","Data.String.CodePoints",function(){return{succ:rr(mn(ur))(Sn(ur)),pred:or(mn(ur))(Sn(ur)),Ord0:function(){return gi}}});var tu=function(t){return rd(t)};var Or=function(t){return nd(t)};var eu=t=>e=>()=>t.measureText(e);var nu=Wt(Zt)(Ct),oh=Rt(vt),ah=v(St),Fd=v(A),uh=so(no)(vt),Rd=E(ha),lh=fo(Ct)(vt);var ru=function(t){return function(e){return{position:e.position,maxWidth:e.maxWidth,fillStyle:e.fillStyle,fontName:e.fontName,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,align:e.align,baseline:e.baseline,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,dragOffset:e.dragOffset,context:e.context,text:t}}};var Di=function(t){return function(e){return{text:e.text,position:e.position,maxWidth:e.maxWidth,fontName:e.fontName,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,align:e.align,baseline:e.baseline,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,dragOffset:e.dragOffset,context:e.context,fillStyle:t}}},Ho=function(t){return function(e){return function(){var r=eu(t)(e)();return r.width}}},ih=function(t){return function(e){return function(n){var r=tu(n);return function(){var a=nu(Ho(t))(r)(),o=Ho(t)(" ")(),l=function(c){return function(p){if(c.value1.value0.length===0)return new M(c.value0,new M([p.value0],p.value1));var m=c.value1.value1+o+p.value1>e;return m?new M(Ot(c.value0)(c.value1.value0),new M([p.value0],p.value1)):new M(c.value0,new M(Ot(c.value1.value0)(p.value0),c.value1.value1+o+p.value1))}},i=oh(l)(new M([],new M([],0)))(je(r)(a)),f=ah(jn(" "))(i.value0);return i.value1.value0.length===0?f:Ot(f)(jn(" ")(i.value1.value0))}}}},yd=function(t){return function(e){return function(n){return Fd(En)(nu(ih(t)(e))(Or(n)))}}},Fi=function(t){return function(e){return function(){var r=eu(t)(e)();return r.actualBoundingBoxAscent+r.actualBoundingBoxDescent}}};var Dd=function(t){return function(e){return Fd(function(){var n=Kt(0);return function(r){return n(uh(r))}}())(nu(Fi(t))(e))}},ou=function(t){var e=t.Monad0().Applicative0(),n=D(e),r=Ut(t),u=te(e);return{position:function(a){return n(a.position)},translate:function(a){return function(o){return n({text:o.text,maxWidth:o.maxWidth,fillStyle:o.fillStyle,fontName:o.fontName,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,align:o.align,baseline:o.baseline,lineHeight:o.lineHeight,letterSpacing:o.letterSpacing,dragOffset:o.dragOffset,context:o.context,position:Ge(a)(o.position)})}},containsPoint:function(a){return function(o){return r(yt(o.context)(function(){Le(o.context)(o.fillStyle)(),Cr(o.context)(o.fontStyle+(" "+(o.fontWeight+(" "+(Rd(o.fontSize)+("px "+o.fontName))))))(),Lr(o.context)(o.baseline)(),Ir(o.context)(o.align)(),tr(o.context)(o.letterSpacing)();var i=function(){if(o.maxWidth instanceof s)return yd(o.context)(o.maxWidth.value0)(o.text)();if(o.maxWidth instanceof d)return Or(o.text);throw new Error("Failed pattern match at Template.Layer.Text (line 75, column 14 - line 77, column 44): "+[o.maxWidth.constructor.name])}(),f=nu(Ho(o.context))(i)(),c=Dd(o.context)(i)();return et(Mo)(ui(f))(function(p){var m=function(){return o.baseline instanceof Ee?o.position.y+c*o.lineHeight*lt(p.value0):o.baseline instanceof Ie?o.position.y-c-lt((It(i)-p.value0|0)-1|0)*c*o.lineHeight:o.position.y+c*o.lineHeight*lt(p.value0)}();if(o.align instanceof Mr||o.align instanceof ie)return o.position.x<=a.x&&a.x<=o.position.x+p.value1&&m<=a.y&&a.y<=m+c;if(o.align instanceof xr||o.align instanceof bn)return o.position.x-p.value1<=a.x&&a.x<=o.position.x&&m<=a.y&&a.y<=m+c;if(o.align instanceof Er)return o.position.x-p.value1/2<=a.x&&a.x<=o.position.x+p.value1/2&&m<=a.y&&a.y<=m+c;throw new Error("Failed pattern match at Template.Layer.Text (line 89, column 7 - line 104, column 41): "+[o.align.constructor.name])})}))}},dragStart:function(a){return function(o){return n({text:o.text,position:o.position,maxWidth:o.maxWidth,fillStyle:o.fillStyle,fontName:o.fontName,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,align:o.align,baseline:o.baseline,lineHeight:o.lineHeight,letterSpacing:o.letterSpacing,context:o.context,dragOffset:new s(a)})}},drag:function(a){return function(o){return u(ou(t))(o.dragOffset)(a)(o)}},dragEnd:function(a){return n({text:a.text,position:a.position,maxWidth:a.maxWidth,fillStyle:a.fillStyle,fontName:a.fontName,fontSize:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight,align:a.align,baseline:a.baseline,lineHeight:a.lineHeight,letterSpacing:a.letterSpacing,context:a.context,dragOffset:d.value})},draw:function(a){return function(o){return yt(a)(function(){Le(a)(o.fillStyle)(),Cr(a)(o.fontStyle+(" "+(o.fontWeight+(" "+(Rd(o.fontSize)+("px "+o.fontName))))))(),Lr(a)(o.baseline)(),Ir(a)(o.align)(),tr(a)(o.letterSpacing)();var i=function(){if(o.maxWidth instanceof s)return yd(a)(o.maxWidth.value0)(o.text)();if(o.maxWidth instanceof d)return Or(o.text);throw new Error("Failed pattern match at Template.Layer.Text (line 117, column 14 - line 119, column 44): "+[o.maxWidth.constructor.name])}(),f=Dd(a)(i)();return lh(ui(i))(function(c){var p=function(){return o.baseline instanceof Ee?o.position.y+lt(c.value0)*f*o.lineHeight:o.baseline instanceof Ie?o.position.y-lt((It(i)-c.value0|0)-1|0)*f*o.lineHeight:o.position.y+lt(c.value0)*f*o.lineHeight}();return yo(a)(c.value1)(o.position.x)(p)})()})}}}};var wd=function(t){return t};var hh=wd;var bi=function(t){return t};var Md=function(t){if(It(t)>0)return new s(hh(t));if(kt)return d.value;throw new Error("Failed pattern match at Data.Array.NonEmpty (line 161, column 1 - line 161, column 58): "+[t.constructor.name])};var kr=function(t){var e=null;return function(){return t===void 0||(e=t(),t=void 0),e}},Oo=function(t){return t()};var Ch=function(t,e,n){var r=0,u;return function(a){if(r===2)return u;if(r===1)throw new ReferenceError(t+" was needed before it finished initializing (module "+e+", line "+a+")",e,a);return r=1,u=n(),r=2,u}};var Eh=kn();var _n=function(){function t(e,n,r){this.value0=e,this.value1=n,this.value2=r}return t.create=function(e){return function(n){return function(r){return new t(e,n,r)}}},t}(),gn=function(){function t(e,n){this.value0=e,this.value1=n}return t.create=function(e){return function(n){return new t(e,n)}},t}();var xd=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),Ld=function(){function t(e){this.value0=e}return t.create=function(e){return new t(e)},t}(),Ei=function(){function t(e,n){this.value0=e,this.value1=n}return t.create=function(e){return function(n){return new t(e,n)}},t}();var Id={defer:function(t){var e=kr(t);return function(n,r,u,a,o){var l=Oo(e);return l(n,r,u,a,o)}}};var lr={map:function(t){return function(e){return function(n,r,u,a,o){return r(function(l){return e(n,r,u,a,function(i,f){return r(function(c){return o(i,t(f))})})})}}}};var Wn={alt:function(t){return function(e){return function(n,r,u,a,o){return r(function(l){return t(new _n(n.value0,n.value1,!1),r,u,function(i,f){return r(function(c){return i.value2?a(i,f):e(n,r,u,a,o)})},o)})}}},Functor0:function(){return lr}},Mh=function(t){return function(e,n,r,u,a){var o=t(e);return a(o.value1,o.value0)}};var xh=function(t){var e=t.Monad0(),n=v(e.Bind1().Apply0().Functor0()),r=D(e.Applicative0()),u=dn(t);return function(a){return function(o){var l=function(i){var f=!1,c;function p(m){var h=m(void 0);if(h instanceof xd){i=h.value0;return}if(h instanceof Ld)return f=!0,n(fe.create)(h.value0);if(h instanceof Ei)return f=!0,r(new se(new M(h.value1,h.value0)));throw new Error("Failed pattern match at Parsing (line 160, column 13 - line 166, column 32): "+[h.constructor.name])}for(;!f;)c=p(i);return c};return u(l)(function(i){return o(a,xd.create,Ld.create,function(f,c){return new Ei(f,new bt(c))},function(f,c){return new Ei(f,new gt(c))})})}}},Nd=Mh(function(t){return new M(t.value1,t)});var Lh={index:0,line:1,column:1},Ih=function(t){var e=v(t.Monad0().Bind1().Apply0().Functor0()),n=xh(t);return function(r){return function(u){var a=new _n(r,Lh,!1);return e(cn)(n(a)(u))}}},Nh=Ih(ss),Sd=function(t){var e=Nh(t);return function(n){return Eh(e(n))}};var uu=function(t){return function(e){return t.value2&&!e.value2?new _n(e.value0,e.value1,!0):e}},Un={apply:function(t){return function(e){return function(n,r,u,a,o){return r(function(l){return t(n,r,u,a,function(i,f){return r(function(c){var p=uu(n)(i);return e(p,r,u,a,function(m,h){return r(function(R){return o(uu(p)(m),f(h))})})})})})}}},Functor0:function(){return lr}};var zr={pure:function(t){return function(e,n,r,u,a){return a(e,t)}},Apply0:function(){return Un}};var ir={bind:function(t){return function(e){return function(n,r,u,a,o){return r(function(l){return t(n,r,u,a,function(i,f){return r(function(c){var p=e(f);return p(uu(n)(i),r,u,a,o)})})})}}},Apply0:function(){return Un}},Sh=De(ir);var Pd={Applicative0:function(){return zr},Bind1:function(){return ir}};var xi={throwError:function(t){return function(e,n,r,u,a){return u(e,t)}},Monad0:function(){return Pd}},Ph=er(xi),Ah=function(t){return function(e){return Ph(new gn(t,e))}},Jr=function(t){return Sh(Ah(t))(Nd)};var lu={tailRecM:function(t){return function(e){return function(n,r,u,a,o){var l=Ch("loop","Parsing",function(){return function(f,c,p){var m=t(c);return m(f,r,u,a,function(h,R){var L=uu(f)(h);if(R instanceof fe){var W=p===0;return W?r(function(J){return l(288)(L,R.value0,30)}):l(290)(L,R.value0,p-1|0)}if(R instanceof se)return o(L,R.value0);throw new Error("Failed pattern match at Parsing (line 284, column 19 - line 292, column 46): "+[R.constructor.name])})}}),i=l(279);return i(n,e,30)}}},Monad0:function(){return Pd}};var Ye=function(){function t(){}return t.value=new t,t}(),Qe=function(){function t(e,n){this.value0=e,this.value1=n}return t.create=function(e){return function(n){return new t(e,n)}},t}();var Gr={foldr:function(t){return function(e){var n=function(){var u=function(a){return function(o){var l=a,i=!1,f;function c(p,m){if(m instanceof Ye)return i=!0,p;if(m instanceof Qe){l=new Qe(m.value0,p),o=m.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[p.constructor.name,m.constructor.name])}for(;!i;)f=c(l,o);return f}};return u(Ye.value)}(),r=Rt(Gr)(et(t))(e);return function(u){return r(n(u))}}},foldl:function(t){var e=function(n){return function(r){var u=n,a=!1,o;function l(i,f){if(f instanceof Ye)return a=!0,i;if(f instanceof Qe){u=t(i)(f.value0),r=f.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[f.constructor.name])}for(;!a;)o=l(u,r);return o}};return e},foldMap:function(t){var e=q(t.Semigroup0()),n=ht(t);return function(r){return Rt(Gr)(function(u){var a=e(u);return function(o){return a(r(o))}})(n)}}};var Od=Mt(Wn),s0=Bn(Id);var d0=pe(Un);var p0=hc(Un);var Bd=function(t){return function(e){return Od(t)(s0(function(n){return Jr("Expected "+e(void 0))}))}},Li=function(t){return function(e){return Od(t)(Jr("Expected "+e))}};var Vr=function(t){return function(e,n,r,u,a){return t(e,n,r,function(o,l){return u(new _n(o.value0,o.value1,e.value2),l)},a)}};var zo=function(t){return function(e){return function(n){return p0(d0(t)(n))(e)}}};var Ni=C(ir),v0=dn(lu),m0=Mt(Wn),iu=D(zr),_0=jl(Gr);var g0=function(t){return Ni(et(v0)(Ye.value)(function(e){return m0(Ni(t)(function(n){return iu(new fe(new Qe(n,e)))}))(iu(new se(e)))}))(function(e){return iu(Cn(_0(e)))})},Si=function(t){return Ni(g0(t))(function(e){var n=Md(e);if(n instanceof d)return Jr("Expected at least 1");if(n instanceof s)return iu(n.value0);throw new Error("Failed pattern match at Parsing.Combinators.Array (line 55, column 3 - line 57, column 25): "+[n.constructor.name])})};var Pi=Sn(ur),R0=uo(wa),y0=ke(),D0=mn(Wo);var F0=E(Ra);var Ai=function(t){return function(e){return function(n){var r=Pi(e);if(r===10)return{index:t.index+1|0,line:t.line+1|0,column:1};if(r===13){var u=_d(0)(n);return u instanceof s&&Pi(u.value0)===10?{index:t.index+1|0,line:t.line,column:t.column}:{index:t.index+1|0,line:t.line+1|0,column:1}}return r===9?{index:t.index+1|0,line:t.line,column:(t.column+8|0)-R0(t.column-1|0)(8)|0}:{index:t.index+1|0,line:t.line,column:t.column+1|0}}}},w0=function(t){return function(e){return function(n){var r=t,u=e,a=!1,o;function l(i,f,c){var p=Ka(f);if(p instanceof d)return a=!0,i;if(p instanceof s){var m=function(){if(br(p.value0.tail))return Ai(i)(p.value0.head)(c);if(kt)return Ai(i)(p.value0.head)(p.value0.tail);throw new Error("Failed pattern match at Parsing.String (line 165, column 7 - line 167, column 52): ")}();r=m,u=p.value0.tail,n=c;return}throw new Error("Failed pattern match at Parsing.String (line 161, column 36 - line 168, column 38): "+[p.constructor.name])}for(;!a;)o=l(r,u,n);return o}}};var Wi=function(t){return Fo(function(e){return function(n){return function(r){return function(u){return function(a){var o=Ka(e.value0);if(o instanceof d)return u(e,new gn("Unexpected EOF",e.value1));if(o instanceof s){var l=Pi(o.value0.head),i=l<0||l>65535;if(i)return u(e,new gn("Expected Char",e.value1));var f=y0(D0(l)),c=t(f);return c?a(new _n(o.value0.tail,Ai(e.value1)(o.value0.head)(o.value0.tail),!0),f):u(e,new gn("Predicate unsatisfied",e.value1))}throw new Error("Failed pattern match at Parsing.String (line 114, column 7 - line 129, column 75): "+[o.constructor.name])}}}}})};var Ui=Fo(function(t){return function(e){return function(n){return function(r){return function(u){var a=br(t.value0);return a?u(new _n(t.value0,t.value1,!0),void 0):r(t,new gn("Expected EOF",t.value1))}}}}}),zd=function(t){return Fo(function(e){return function(n){return function(r){return function(u){return function(a){var o=t(e.value0);if(o instanceof bt)return u(e,new gn(o.value0,e.value1));if(o instanceof gt)return a(new _n(o.value0.remainder,w0(e.value1)(o.value0.consumed)(o.value0.remainder),!br(o.value0.consumed)),o.value0.value);throw new Error("Failed pattern match at Parsing.String (line 286, column 7 - line 290, column 121): "+[o.constructor.name])}}}}})};var Hi=zd(function(t){return new gt({value:t,consumed:t,remainder:""})});var he=function(t){return Li(Wi(function(e){return e===t}))(F0(t))};var L0=E(Gu(Ra));var I0=Yl(pa);var Vd=function(t){return Bd(Wi(et(I0)(t)))(function(e){return"none of "+L0(t)})};function cu(t,e){var n={};for(var r in e)({}).hasOwnProperty.call(e,r)&&(n[r]=e[r]);for(var u in t)({}).hasOwnProperty.call(t,u)&&(n[u]=t[u]);return n}var fu=function(){return function(){return function(t){return function(e){return cu(t,e)}}}};var A0=E(ha),su=q(qe),Jo=ae(St),tp=Rt(vt),Oi=v(A),W0=so(no)(vt),cr=Wt(Zt)(Ct),du=ol(vt)(Oe),Ke=v(St),U0=D(Ct),H0=v(pt),Me=v(lr),Ze=Mt(Wn),mu=pe(Un),$0=fu()(),q0=Mf(Ct)(Zt),O0=G(Q),$i=fo(Ct)(vt),ep=on(lr);var _u=function(){function t(){}return t.value=new t,t}(),np=function(){function t(){}return t.value=new t,t}(),gu=function(){function t(){}return t.value=new t,t}(),rp=function(){function t(){}return t.value=new t,t}();var op=function(t){return t.text},B0=function(t){return function(e){return function(n){return{line:Ot(e.line)(n),width:e.width+t+n.width}}}},Bi=function(t){return function(e){return function(n){var r=function(){if(n.weight instanceof _u)return e.weight.normal;if(n.weight instanceof np)return e.weight.bold;throw new Error("Failed pattern match at Template.Layer.Text.Markup (line 300, column 14 - line 302, column 37): "+[n.weight.constructor.name])}(),u=function(){if(n.style instanceof gu)return e.style.normal;if(n.style instanceof rp)return e.style.italic;throw new Error("Failed pattern match at Template.Layer.Text.Markup (line 297, column 13 - line 299, column 39): "+[n.style.constructor.name])}();return Cr(t)(u+(" "+(r+(" "+(A0(e.size)+("px "+e.name))))))}}},ap=function(t){return function(e){return{text:e.text,position:e.position,maxWidth:e.maxWidth,fillStyle:e.fillStyle,align:e.align,baseline:e.baseline,lineHeight:e.lineHeight,emptyLineHeight:e.emptyLineHeight,letterSpacing:e.letterSpacing,dragOffset:e.dragOffset,context:e.context,font:{name:e.font.name,style:e.font.style,weight:e.font.weight,size:t}}}},ki=function(t){return function(e){return{text:e.text,position:e.position,maxWidth:e.maxWidth,font:e.font,align:e.align,baseline:e.baseline,lineHeight:e.lineHeight,emptyLineHeight:e.emptyLineHeight,letterSpacing:e.letterSpacing,dragOffset:e.dragOffset,context:e.context,fillStyle:t}}},k0=function(t){return br(op(t.fragment))},z0=function(t){return Ga(k0)(t.word)},J0=function(t){return Ga(z0)(t.line)};var up=function(t){return function(e){var n=function(u){return function(a){var o=Co(1)(t(a.text));if(o.before.length===1&&o.before[0]===""&&o.after.length===0)return{splits:u.splits,split:u.split};if(o.before.length===1&&o.after.length===0)return{splits:u.splits,split:Ot(u.split)({style:a.style,weight:a.weight,text:o.before[0]})};if(o.before.length===1&&o.before[0]===""){var l=Co(It(o.after)-1|0)(o.after);return l.after.length===1&&l.after[0]===""?{splits:su(Ot(u.splits)(u.split))(Jo(l.before)(function(i){return[{style:a.style,weight:a.weight,text:i}]})),split:[]}:l.after.length===1?{splits:su(Ot(u.splits)(u.split))(Jo(l.before)(function(i){return[{style:a.style,weight:a.weight,text:i}]})),split:[{style:a.style,weight:a.weight,text:l.after[0]}]}:{splits:u.splits,split:u.split}}if(o.before.length===1){var l=Co(It(o.after)-1|0)(o.after);return l.after.length===1&&l.after[0]===""?{splits:su(Ot(u.splits)(Ot(u.split)({style:a.style,weight:a.weight,text:o.before[0]})))(Jo(l.before)(function(f){return[{style:a.style,weight:a.weight,text:f}]})),split:[]}:l.after.length===1?{splits:su(Ot(u.splits)(Ot(u.split)({style:a.style,weight:a.weight,text:o.before[0]})))(Jo(l.before)(function(f){return[{style:a.style,weight:a.weight,text:f}]})),split:[{style:a.style,weight:a.weight,text:l.after[0]}]}:{splits:u.splits,split:u.split}}return{splits:u.splits,split:u.split}}},r=tp(n)({splits:[],split:[]})(e);return Ot(r.splits)(r.split)}},lp=up(tu),zi=function(t){return{text:t,style:gu.value,weight:_u.value}};var G0=function(t){return function(e){return{fragment:t,width:e}}},ip=function(t){return function(e){return function(n){return yt(t)(function(){return Bi(t)(e)(n)(),Ho(t)(n.text)()})}}},Ji=function(t){return function(e){return ip(t)(e)({style:gu.value,weight:_u.value,text:" "})}},V0=function(t){return function(e){return function(n){return yt(t)(function(){return Bi(t)(e)(n)(),Fi(t)(n.text)()})}}},j0=function(t){return function(e){return function(n){return Oi(function(){var r=Kt(0);return function(u){return r(W0(u))}}())(cr(V0(t)(e))(n))}}},X0=function(t){return function(e){return function(n){return Oi(G0(n))(ip(t)(e)(n))}}},cp=function(t){return function(e){return function(n){return function(){var u=cr(X0(t)(e))(n)(),a=du(Ke(function(o){return o.width})(u));return{word:u,width:a}}}}},Xd=function(t){return function(e){return function(n){var r=lp(n);return function(){var a=cr(cp(t)(e))(r)(),o=Ji(t)(e)(),l=o*lt(It(a)-1|0)+du(Ke(function(i){return i.width})(a));return{line:a,width:l}}}}},Y0=function(t){return function(e){return function(n){return function(r){var u=lp(r);return function(){var o=cr(cp(t)(e))(u)(),l=Ji(t)(e)(),i=function(c){return function(p){if(c.value1.line.length===0)return new M(c.value0,{line:[p],width:p.width});var m=c.value1.width+l+p.width>n;return m?new M(Ot(c.value0)(c.value1),{line:[p],width:p.width}):new M(c.value0,B0(l)(c.value1)(p))}},f=tp(i)(new M([],{line:[],width:0}))(o);return f.value1.line.length===0?f.value0:Ot(f.value0)(f.value1)}}}}},Gi=function(t){return function(e){return{text:e.text,position:e.position,fillStyle:e.fillStyle,font:e.font,align:e.align,baseline:e.baseline,lineHeight:e.lineHeight,emptyLineHeight:e.emptyLineHeight,letterSpacing:e.letterSpacing,dragOffset:e.dragOffset,context:e.context,maxWidth:H0(t)(e.maxWidth)}}},Go=function(){var t=Me(bi);return function(e){return t(Si(e))}}(),Vo=Me(function(t){return zi(vi(t))})(Go(Vd(["_","*"]))),qi=up(Or),Yd=function(t){return function(e){return function(n){return function(r){return Oi(En)(cr(Y0(t)(e)(n))(qi(r)))}}}},pu=function(t){return{text:t.text,weight:t.weight,style:rp.value}},Qd=Ze(Vr(zo(he("_"))(he("_"))(Me(pu)(Vo))))(Ze(Vo)(mu(he("_"))(Me(function(t){return pu(zi(t))})(Hi)))),Q0=function(t){return t.fragment},K0=function(t){return Ke(Q0)(t.word)},Z0=function(t){return Ke(K0)(t.line)},Kd=function(t){return function(e){return function(n){return function(r){return function(){var a=j0(t)(e)(En(Ls(Z0)(r)))();return Jo(r)(function(o){return $0(o)({height:function(){var l=J0(o);return l?n*e.size:a}()})})}}}}},hu=function(t){var e=t.Monad0().Applicative0(),n=D(e),r=Ut(t),u=te(e);return{position:function(a){return n(a.position)},translate:function(a){return function(o){return n({text:o.text,maxWidth:o.maxWidth,fillStyle:o.fillStyle,font:o.font,align:o.align,baseline:o.baseline,lineHeight:o.lineHeight,emptyLineHeight:o.emptyLineHeight,letterSpacing:o.letterSpacing,dragOffset:o.dragOffset,context:o.context,position:Ge(a)(o.position)})}},containsPoint:function(a){return function(o){return r(yt(o.context)(function(){Le(o.context)(o.fillStyle)(),Lr(o.context)(o.baseline)(),Ir(o.context)(o.align)(),tr(o.context)(o.letterSpacing)();var i=function(){if(o.maxWidth instanceof s)return Yd(o.context)(o.font)(o.maxWidth.value0)(o.text)();if(o.maxWidth instanceof d)return cr(Xd(o.context)(o.font))(qi(o.text))();throw new Error("Failed pattern match at Template.Layer.Text.Markup (line 204, column 15 - line 206, column 89): "+[o.maxWidth.constructor.name])}(),f=Kd(o.context)(o.font)(o.emptyLineHeight)(i)(),c=du(Ke(function(h){return h.height})(f))+(o.lineHeight-1)*o.font.size*lt(It(f)-1|0),p=Zn(0)(Wr(function(h){return function(R){return h+R.height+(o.lineHeight-1)*o.font.size}})(0)(f)),m=q0(je(f)(p))(function(h){var R=function(){return o.baseline instanceof Ee?o.position.y+h.value1:o.baseline instanceof Ie?o.position.y+h.value1-c:o.position.y+h.value1}();return U0(function(){if(o.align instanceof Mr||o.align instanceof ie)return o.position.x<=a.x&&a.x<=o.position.x+h.value0.width&&R<=a.y&&a.y<=R+h.value0.height;if(o.align instanceof xr||o.align instanceof bn)return o.position.x-h.value0.width<=a.x&&a.x<=o.position.x&&R<=a.y&&a.y<=R+h.value0.height;if(o.align instanceof Er)return o.position.x-h.value0.width/2<=a.x&&a.x<=o.position.x+h.value0.width/2&&R<=a.y&&a.y<=R+h.value0.height;throw new Error("Failed pattern match at Template.Layer.Text.Markup (line 222, column 14 - line 242, column 33): "+[o.align.constructor.name])}())})();return Mo(O0)(m)}))}},dragStart:function(a){return function(o){return n({text:o.text,position:o.position,maxWidth:o.maxWidth,fillStyle:o.fillStyle,font:o.font,align:o.align,baseline:o.baseline,lineHeight:o.lineHeight,emptyLineHeight:o.emptyLineHeight,letterSpacing:o.letterSpacing,context:o.context,dragOffset:new s(a)})}},drag:function(a){return function(o){return u(hu(t))(o.dragOffset)(a)(o)}},dragEnd:function(a){return n({text:a.text,position:a.position,maxWidth:a.maxWidth,fillStyle:a.fillStyle,font:a.font,align:a.align,baseline:a.baseline,lineHeight:a.lineHeight,emptyLineHeight:a.emptyLineHeight,letterSpacing:a.letterSpacing,context:a.context,dragOffset:d.value})},draw:function(a){return function(o){return yt(a)(function(){Le(a)(o.fillStyle)(),Lr(a)(o.baseline)(),Ir(a)(ie.value)(),tr(a)(o.letterSpacing)();var i=function(){if(o.maxWidth instanceof s)return Yd(a)(o.font)(o.maxWidth.value0)(o.text)();if(o.maxWidth instanceof d)return cr(Xd(a)(o.font))(qi(o.text))();throw new Error("Failed pattern match at Template.Layer.Text.Markup (line 257, column 15 - line 259, column 83): "+[o.maxWidth.constructor.name])}(),f=Kd(a)(o.font)(o.emptyLineHeight)(i)(),c=du(Ke(function(m){return m.height})(f))+(o.lineHeight-1)*o.font.size*lt(It(f)-1|0),p=Zn(0)(Wr(function(m){return function(h){return m+h.height+(o.lineHeight-1)*o.font.size}})(0)(f));return $i(je(f)(p))(function(m){var h=function(){return o.baseline instanceof Ee?o.position.y+m.value1:o.baseline instanceof Ie?o.position.y+m.value1-c+m.value0.height:o.position.y+m.value1}(),R=function(){if(o.align instanceof Mr||o.align instanceof ie)return o.position.x;if(o.align instanceof xr||o.align instanceof bn)return o.position.x-m.value0.width;if(o.align instanceof Er)return o.position.x-m.value0.width/2;throw new Error("Failed pattern match at Template.Layer.Text.Markup (line 278, column 16 - line 283, column 57): "+[o.align.constructor.name])}();return function(){var W=Ji(a)(o.font)(),J=Zn(0)(Wr(function(st){return function($){return st+W+$.width}})(0)(m.value0.line));return $i(je(m.value0.line)(J))(function(st){var $=Zn(0)(Wr(function(Z){return function(_t){return Z+_t.width}})(0)(st.value0.word));return $i(je(st.value0.word)($))(function(Z){return function(){return Bi(a)(o.font)(Z.value0.fragment)(),yo(a)(op(Z.value0.fragment))(R+st.value1+Z.value1)(h)()}})})()}})()})}}}},vu=function(t){return{text:t.text,style:t.style,weight:np.value}},t2=Ze(Vr(zo(he("*"))(he("*"))(Me(Ke(vu))(Go(Qd)))))(mu(he("*"))(Ze(ep([])(Ui))(Me(Ke(vu))(Go(Qd))))),Zd=Ze(Vr(zo(he("*"))(he("*"))(Me(vu)(Vo))))(Ze(Vo)(mu(he("*"))(Me(function(t){return vu(zi(t))})(Hi)))),e2=Ze(Vr(zo(he("_"))(he("_"))(Me(Ke(pu))(Go(Zd)))))(mu(he("_"))(Ze(ep([])(Ui))(Me(Ke(pu))(Go(Zd))))),n2=Me(function(t){return En(bi(t))})(Si(Ze(e2)(Ze(t2)(Me(Jl)(Vo)))));var jo=function(t){return function(e){var n=Sd(t)(n2);if(n instanceof gt)return{position:e.position,maxWidth:e.maxWidth,fillStyle:e.fillStyle,font:e.font,align:e.align,baseline:e.baseline,lineHeight:e.lineHeight,emptyLineHeight:e.emptyLineHeight,letterSpacing:e.letterSpacing,dragOffset:e.dragOffset,context:e.context,text:n.value0};if(n instanceof bt)return{position:e.position,maxWidth:e.maxWidth,fillStyle:e.fillStyle,font:e.font,align:e.align,baseline:e.baseline,lineHeight:e.lineHeight,emptyLineHeight:e.emptyLineHeight,letterSpacing:e.letterSpacing,dragOffset:e.dragOffset,context:e.context,text:[{text:t,style:gu.value,weight:_u.value}]};throw new Error("Failed pattern match at Template.Layer.Text.Markup (line 179, column 37 - line 181, column 106): "+[n.constructor.name])}};var sp=function(t){return t},dp=function(t){return t},pp=function(t){return t},r2={mapLayerWrapper:function(t){return function(e){var n=v(e.Bind1().Apply0().Functor0());return function(r){return function(u){return n(sp)(r(u))}}}}},o2=sn(r2);var a2={mapLayerWrapper:function(t){return function(e){var n=v(e.Bind1().Apply0().Functor0());return function(r){return function(u){return n(dp)(r(u))}}}}},u2=sn(a2);var l2={mapLayerWrapper:function(t){return function(e){var n=v(e.Bind1().Apply0().Functor0());return function(r){return function(u){return n(pp)(r(u))}}}}},i2=sn(l2);var vp=function(t){return function(e){var n=Ft(e),r=o2(e)(t),u=Lt(e),a=$t(e),o=ee(e),l=wt(e);return{position:function(i){return n(i)},translate:function(){var i=Dt(e);return function(f){return r(i(f))}}(),containsPoint:function(i){return function(f){return u(i)(f)}},dragStart:function(i){return r(a({offsetX:i.offsetX,offsetY:0}))},drag:function(i){return r(o({translateX:i.translateX,translateY:0}))},dragEnd:r(qt(e)),draw:function(i){return function(f){return l(i)(f)}}}}},mp=function(t){return function(e){var n=Ft(e),r=u2(e)(t),u=Lt(e),a=$t(e),o=ee(e),l=wt(e);return{position:function(i){return n(i)},translate:function(){var i=Dt(e);return function(f){return r(i(f))}}(),containsPoint:function(i){return function(f){return u(i)(f)}},dragStart:function(i){return r(a({offsetX:0,offsetY:i.offsetY}))},drag:function(i){return r(o({translateX:0,translateY:i.translateY}))},dragEnd:r(qt(e)),draw:function(i){return function(f){return l(i)(f)}}}}},_p=function(t){var e=D(t.Applicative0());return function(n){var r=Ft(n),u=Lt(n),a=wt(n);return{position:function(o){return r(o)},translate:function(){var o=i2(n)(t),l=Dt(n);return function(i){return o(l(i))}}(),containsPoint:function(o){return function(l){return u(o)(l)}},dragStart:tt(e),drag:tt(e),dragEnd:e,draw:function(o){return function(l){return a(o)(l)}}}}};var gp=sp,Vi=dp,Hn=pp;var fr=function(t){return function(e){return function(){return e[t]}}},f2=fr("URL"),s2=fr("documentURI"),d2=fr("origin"),p2=fr("compatMode"),v2=fr("characterSet"),m2=fr("contentType");var _2=fr("documentElement");function Xo(t){return function(e){return function(){return e.createElement(t)}}}function hp(t,e,n){return t==null?e:n(t)}var at=function(t){return hp(t,d.value,s.create)};function Rp(t,e,n,r){if(typeof window<"u"){var u=window[n];if(u!=null&&r instanceof u)return e(r)}for(var a=r;a!=null;){var o=Object.getPrototypeOf(a),l=o.constructor.name;if(l===n)return e(r);if(l==="Object")return t;a=o}return t}var w=function(t){return function(e){return Rp(d.value,s.create,t,e)}};var Ru=function(t){return function(e){return e[t]}},w2=Ru("namespaceURI"),b2=Ru("prefix"),T2=Ru("localName"),C2=Ru("tagName");function sr(t){return function(e){return function(n){return function(){n.setAttribute(t,e)}}}}function ji(t){return function(){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}}var yu=function(t){return function(e){return function(){return e[t]}}},M2=yu("children"),x2=yu("firstElementChild"),L2=yu("lastElementChild"),I2=yu("childElementCount");var Dp=_,ne=_;var Ae=function(t){return function(e){return function(){return e[t]}}};var W2=Ae("baseURI"),U2=Ae("ownerDocument"),H2=Ae("parentNode"),$2=Ae("parentElement");var q2=Ae("childNodes"),O2=Ae("firstChild"),B2=Ae("lastChild"),k2=Ae("previousSibling"),z2=Ae("nextSibling"),J2=Ae("nodeValue");var G2=Ae("textContent");function Xi(t){return function(e){return function(){e.appendChild(t)}}}function Fp(t){return function(e){return function(){return e.getElementById(t)}}}var K2=v(A),tn=function(t){var e=K2(at),n=Fp(t);return function(r){return e(n(r))}};function Jt(t){return function(){return function(e){return t(e)()}}}function Gt(t){return function(e){return function(n){return function(r){return function(){return r.addEventListener(t,e,n)}}}}}var wp=_;function bp(t){return function(e){return e.item(t)}}var lR=v(pt),iR=function(t){var e=bp(t);return function(n){return at(e(n))}},Tp=function(t){var e=pn(t);return function(n){return e(function(r){return lR(et(M.create)(r+1|0))(iR(r)(n))})(0)}};function Yi(t){return function(){return URL.createObjectURL(t)}}var Qi=function(){return window};function Cp(t){return t.body}var _R=v(A);var en=_;var Ep=_,Du=_;var Mp=function(t){return _R(at)(function(){return Cp(t)})};function xp(t,e,n){var r=Object.prototype.toString.call(n);return r.indexOf("[object HTML")===0&&r.indexOf("Element]")===r.length-8?e(n):t}function Fu(t){return function(){return t.click()}}function Ki(t){return function(){return t.offsetWidth}}function Zi(t){return function(){return t.offsetHeight}}var Lp=_;var Ip=_;var wu=function(t){return xp(d.value,s.create,t)};function bu(t){return function(){return t.checked}}function Pp(t){return function(){return t.files}}function jr(t){return function(){return t.value}}var jR=v(A);var Yo=w("HTMLInputElement");var tc=function(){var t=jR(at);return function(e){return t(Pp(e))}}();function Tu(t){return function(){return t.value}}var Wp=w("HTMLSelectElement");function Cu(t){return function(){return t.value}}var Up=w("HTMLTextAreaElement");function ec(t){return function(){return t.document}}function Qo(t){return t.clientX}function Ko(t){return t.clientY}function Zo(t){return t.touches}var Eu=w("TouchEvent");function Hp(t,e){return e.item(t)}var Mu=function(t){return function(e){return at(Hp(t,e))}};function ta(t){return t.clientX}function ea(t){return t.clientY}var xu=w("MouseEvent");var Re=D(Ct),by=Ue(He),ra=Po(Xt)(Tn(A)),Ty=wt(ra),Xr=Ft(ra),$p=$t(ra),Iu=ee(ra),qp=qt(ra),nc=nr(Tt),$n=C(nc),Lu=De(nc),na=$r(Tt),nn=Se(Hr)(Tt),rc=by(nc),Op=De(wn),oc=D(No(Tt)),Cy=Qa(Xt),Ey=fu()(),We=Xs(Xt),My=Tp(Bl),Yr=function(t){return function(e){return function(n){return function(){var u=ji(Ip(e))(),a=Ki(e)(),o=Zi(e)(),l=mo(t)(),i=_o(t)();return{x:(n.x-u.left)*l/a,y:(n.y-u.top)*i/o}}}}},ye=function(t){return function(){var n=Qn(t.canvas)(),r=zf(t.canvas)();return wl(n)({x:0,y:0,width:r.width,height:r.height})(),yt(n)(Ty(n)(t.layer))()}},xy=function(t){return Jt(function(e){var n=Eu(e);if(n instanceof d)return Re(void 0);if(n instanceof s){var r=Mu(0)(Zo(n.value0));if(r instanceof d)return ye(t);if(r instanceof s)return function(){var a=Xr(t.layer)(),o=Yr(t.canvas)(t.canvasHtmlElement)({x:lt(Qo(r.value0)),y:lt(Ko(r.value0))})(),l={offsetX:o.x-a.x,offsetY:o.y-a.y};return $p(l)(t.layer)(),ye(t)()};throw new Error("Failed pattern match at Template.Main (line 199, column 22 - line 209, column 22): "+[r.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 197, column 63 - line 209, column 22): "+[n.constructor.name])})},Ly=function(t){return Jt(function(e){var n=Eu(e);if(n instanceof d)return Re(void 0);if(n instanceof s){var r=Mu(0)(Zo(n.value0));if(r instanceof d)return ye(t);if(r instanceof s)return function(){var a=Xr(t.layer)(),o=Yr(t.canvas)(t.canvasHtmlElement)({x:lt(Qo(r.value0)),y:lt(Ko(r.value0))})(),l={translateX:o.x-a.x,translateY:o.y-a.y};return Iu(l)(t.layer)(),ye(t)()};throw new Error("Failed pattern match at Template.Main (line 227, column 22 - line 237, column 22): "+[r.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 225, column 62 - line 237, column 22): "+[n.constructor.name])})},Iy=function(t){return Jt(function(e){var n=Eu(e);if(n instanceof d)return Re(void 0);if(n instanceof s){var r=Mu(0)(Zo(n.value0));if(r instanceof d)return ye(t);if(r instanceof s)return function(){var a=Xr(t.layer)(),o=Yr(t.canvas)(t.canvasHtmlElement)({x:lt(Qo(r.value0)),y:lt(Ko(r.value0))})(),l={translateX:o.x-a.x,translateY:o.y-a.y};return Iu(l)(t.layer)(),qp(t.layer)(),ye(t)()};throw new Error("Failed pattern match at Template.Main (line 256, column 22 - line 267, column 22): "+[r.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 254, column 61 - line 267, column 22): "+[n.constructor.name])})},ac=function(t){return function(e){return Ln($n(Lu(na)(nn(Nl(t))))(function(n){return rc(nn(Il(n)(e)))(function(){return $n(nn(Op(ec)(Qi)))(function(r){return $n(Lu(na)(nn(tn(t)(en(r)))))(function(u){return $n(na(wu(u)))(function(a){return oc({canvas:n,canvasElement:u,canvasHtmlElement:a,document:r})})})})})}))}},Bp=function(t){var e=Ht(t);return function(n){return function(r){return function(){var a=Cy(e(r))();return Ey(n)({layer:a})}}}},Ny=function(t){return Jt(function(e){var n=xu(e);if(n instanceof d)return Re(void 0);if(n instanceof s)return function(){var u=Xr(t.layer)(),a=Yr(t.canvas)(t.canvasHtmlElement)({x:lt(ta(n.value0)),y:lt(ea(n.value0))})(),o={translateX:a.x-u.x,translateY:a.y-u.y};return Iu(o)(t.layer)(),qp(t.layer)(),ye(t)()};throw new Error("Failed pattern match at Template.Main (line 240, column 60 - line 251, column 20): "+[n.constructor.name])})},Sy=function(t){return Jt(function(e){var n=xu(e);if(n instanceof d)return Re(void 0);if(n instanceof s)return function(){var u=Xr(t.layer)(),a=Yr(t.canvas)(t.canvasHtmlElement)({x:lt(ta(n.value0)),y:lt(ea(n.value0))})(),o={translateX:a.x-u.x,translateY:a.y-u.y};return Iu(o)(t.layer)(),ye(t)()};throw new Error("Failed pattern match at Template.Main (line 212, column 62 - line 222, column 20): "+[n.constructor.name])})},Py=function(t){return Jt(function(e){var n=xu(e);if(n instanceof d)return Re(void 0);if(n instanceof s)return function(){var u=Xr(t.layer)(),a=Yr(t.canvas)(t.canvasHtmlElement)({x:lt(ta(n.value0)),y:lt(ea(n.value0))})(),o={offsetX:a.x-u.x,offsetY:a.y-u.y};return $p(o)(t.layer)(),ye(t)()};throw new Error("Failed pattern match at Template.Main (line 184, column 62 - line 194, column 20): "+[n.constructor.name])})},Ay=function(t){return Jt(function(e){return ye(t)})},uc=function(t){return function(e){return function(n){return function(r){return Ln(function(){var u=en(r.document);return $n(Lu(na)(nn(tn(t)(u))))(function(a){return $n(nn(Jt(function(o){return function(){var i=Xo("canvas")(Du(r.document))();sr("id")("hidden-clip-canvas")(i)();var f=Mp(r.document)();if(f instanceof s){Xi(Dp(i))(Lp(f.value0))();var c=Nl("hidden-clip-canvas")();if(c instanceof s){Il(c.value0)({width:n.width,height:n.height})();var p=Qn(c.value0)(),m=r.canvas;Ml(p)(m)(n.x)(n.y)(n.width)(n.height)(0)(0)(n.width)(n.height)();var h=Aa(c.value0)(),R=Xo("a")(Du(r.document))();sr("href")(h)(R)(),sr("download")(e)(R)();var L=wu(R);if(L instanceof s)return Fu(L.value0)();throw new Error("Failed pattern match at Template.Main (line 178, column 9 - line 178, column 53): "+[L.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 167, column 5 - line 167, column 64): "+[c.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 164, column 5 - line 164, column 53): "+[f.constructor.name])}})))(function(o){return rc(nn(Gt("click")(o)(!1)(ne(a))))(function(){return oc(a)})})})}())}}}},kp=function(t){return function(e){return function(n){return Ln(function(){var r=en(n.document);return $n(Lu(na)(nn(tn(t)(r))))(function(u){return $n(nn(Jt(function(a){return function(){var l=Aa(n.canvas)(),i=Xo("a")(Du(n.document))();sr("href")(l)(i)(),sr("download")(e)(i)();var f=wu(i);if(f instanceof s)return Fu(f.value0)();throw new Error("Failed pattern match at Template.Main (line 149, column 9 - line 149, column 53): "+[f.constructor.name])}})))(function(a){return rc(nn(Gt("click")(a)(!1)(ne(u))))(function(){return oc(u)})})})}())}}},Wy=function(t){return function(e){return function(n){return function(r){return function(){var a=tn(e)(en(t.document))();if(a instanceof s){var o=Up(a.value0);if(o instanceof s){var l=Cu(o.value0)();We(r(l))(n)();var i=Jt(function(f){return function(){var p=Cu(o.value0)();return We(r(p))(n)()}})();return Gt("input")(i)(!1)(ne(a.value0))()}throw new Error("Failed pattern match at Template.Main (line 303, column 7 - line 303, column 55): "+[o.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 302, column 3 - line 302, column 79): "+[a.constructor.name])}}}}},oa=function(t){return function(e){return function(n){return function(r){return Wy(t)(e)(n)(function(u){return function(a){return function(o){return Re(a(o))}}(r(u))})}}}},Qr=function(t){return function(e){return function(n){return function(r){return function(){var a=tn(e)(en(t.document))();if(a instanceof s){var o=Wp(a.value0);if(o instanceof s){var l=Tu(o.value0)();We(r(l))(n)();var i=Jt(function(f){return function(){var p=Tu(o.value0)();return We(r(p))(n)()}})();return Gt("input")(i)(!1)(ne(a.value0))()}throw new Error("Failed pattern match at Template.Main (line 335, column 7 - line 335, column 54): "+[o.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 334, column 3 - line 334, column 79): "+[a.constructor.name])}}}}},aa=function(t){return function(e){return function(n){return function(r){return Qr(t)(e)(n)(function(u){return function(a){return function(o){return Re(a(o))}}(r(u))})}}}},zp=function(t){return function(e){return function(n){return function(r){return function(){var a=tn(e)(en(t.document))();if(a instanceof s){var o=Yo(a.value0);if(o instanceof s){var l=jr(o.value0)();(function(){var f=Ha(l);if(f instanceof s)return We(r(f.value0))(n)();if(f instanceof d)return void 0;throw new Error("Failed pattern match at Template.Main (line 354, column 3 - line 356, column 25): "+[f.constructor.name])})();var i=Jt(function(f){return function(){var p=jr(o.value0)(),m=Ha(p);if(m instanceof s)return We(r(m.value0))(n)();if(m instanceof d)return void 0;throw new Error("Failed pattern match at Template.Main (line 360, column 5 - line 362, column 27): "+[m.constructor.name])}})();return Gt("input")(i)(!1)(ne(a.value0))()}throw new Error("Failed pattern match at Template.Main (line 351, column 7 - line 351, column 52): "+[o.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 350, column 3 - line 350, column 79): "+[a.constructor.name])}}}}},Uy=function(t){return function(e){return function(n){return function(r){return zp(t)(e)(n)(function(u){return function(a){return function(o){return Re(a(o))}}(r(u))})}}}};var Jp=function(t){var e=Xf(t);return function(n){return function(r){return function(u){return function(){var o=Mn(1)();return zp(n)(r)(u)(function(l){return function(i){return function(){var c=ce(o)();return Pr(l)(o)(),e(l/c)(i)()}}})()}}}}},Nu=function(t){return function(e){return function(n){return Uy(t)(e)(n)(ap)}}},Hy=function(t){return function(e){return function(n){return function(r){return function(){var a=tn(e)(en(t.document))();if(a instanceof s){var o=Yo(a.value0);if(o instanceof s){var l=jr(o.value0)();We(r(l))(n)();var i=Jt(function(f){return function(){var p=jr(o.value0)();return We(r(p))(n)()}})();return Gt("input")(i)(!1)(ne(a.value0))()}throw new Error("Failed pattern match at Template.Main (line 287, column 7 - line 287, column 52): "+[o.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 286, column 3 - line 286, column 79): "+[a.constructor.name])}}}}},Su=function(t){return function(e){return function(n){return function(r){return Hy(t)(e)(n)(function(u){return function(a){return function(o){return Re(a(o))}}(r(u))})}}}},$y=function(t){return function(e){return function(n){return function(r){return function(){var a=tn(e)(en(t.document))();if(a instanceof s){var o=Yo(a.value0);if(o instanceof s){var l=function(c){if(c instanceof d)return Re(void 0);if(c instanceof s){var p=Xe(My(c.value0))(0);if(p instanceof d)return Re(void 0);if(p instanceof s)return We(r(p.value0))(n);throw new Error("Failed pattern match at Template.Main (line 390, column 24 - line 392, column 54): "+[p.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 388, column 26 - line 392, column 54): "+[c.constructor.name])},i=tc(o.value0)();l(i)();var f=Jt(function(c){return Op(l)(tc(o.value0))})();return Gt("change")(f)(!1)(ne(a.value0))()}throw new Error("Failed pattern match at Template.Main (line 385, column 7 - line 385, column 52): "+[o.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 384, column 3 - line 384, column 79): "+[a.constructor.name])}}}}};var qy=function(t){return function(e){return function(n){return function(r){return function(){var a=tn(e)(en(t.document))();if(a instanceof s){var o=Yo(a.value0);if(o instanceof s){var l=bu(o.value0)();We(r(l))(n)();var i=Jt(function(f){return function(){var p=bu(o.value0)();return We(r(p))(n)()}})();return Gt("input")(i)(!1)(ne(a.value0))()}throw new Error("Failed pattern match at Template.Main (line 319, column 7 - line 319, column 52): "+[o.constructor.name])}throw new Error("Failed pattern match at Template.Main (line 318, column 3 - line 318, column 79): "+[a.constructor.name])}}}}},lc=function(t){return function(e){return function(n){return function(r){return qy(t)(e)(n)(function(u){return function(a){return function(o){return Re(a(o))}}(r(u))})}}}},Oy=function(t){return function(e){return function(n){return function(r){return $y(t)(e)(n)(function(u){return r(wp(u))})}}}};var ic=function(t){return function(e){return function(n){return function(r){return Oy(t)(e)(n)(function(u){return function(a){return function(){var l=Yi(u)();return r(l)(a)()}}})}}}},cc=function(t){return function(){var n=Py(t)(),r=Sy(t)(),u=Ny(t)(),a=xy(t)(),o=Ly(t)(),l=Iy(t)(),i=Ay(t)();return Gt("mousedown")(n)(!1)(ne(t.canvasElement))(),Gt("mousemove")(r)(!1)(ne(t.canvasElement))(),Gt("mouseup")(u)(!1)(ne(t.canvasElement))(),Gt("touchstart")(a)(!1)(ne(t.canvasElement))(),Gt("touchmove")(o)(!1)(ne(t.canvasElement))(),Gt("touchend")(l)(!1)(ne(t.canvasElement))(),Gt("input")(i)(!1)(Ep(t.document))()}};var ky=Ue(He),zy=Vn(vt)(Ce),jp=Wt(Zt),fc=Nt(A),Jy=jp(Ct),Xp=le(mr()(hn({reflectSymbol:function(){return"height"}})()(hn({reflectSymbol:function(){return"width"}})()(vr)(Oe))(Oe))),Kr=De(wn),re=Qa(Xt),Yp=Ps(Xt),Bt=As(Xt),Qp=Jp(Ns(Xt)),ua=ei(Xt),Au=Po(Xt),Kp=Ht(Au(hu(Xt))),Zp=Ht(Au(ou(Xt))),sc=_p(Tt),tv=Va(Xt),ev=Au(tv),Pu=Ht(sc(ev)),nv=Ht(mp(Tt)(td(Ql(Tt))(Tt))),rv=Vs(Tt),ov=Ht(Au(Ks(rv)(Tt))),av=Ht(ev),uv=Ht(sc(li(Ct))),lv=Bp(rv),Gy=Ht(sc(tv));var iv=function(t){var e=Va(t),n=Ft(e),r=t.Monad0(),u=r.Bind1(),a=C(u),o=v(u.Apply0().Functor0()),l=Us(t),i=Dt(e),f=r.Applicative0(),c=D(f),p=Lt(e),m=wt(e),h=$t(e),R=te(f),L=qt(e);return{position:function(W){return n(W.guillotine)},translate:function(W){return function(J){return a(o(function(st){return function($){return $+W.translateX}(function($){return $.x}(st))})(n(J.guillotine)))(function(st){return a(l(J.guillotine))(function($){var Z=Ws(J.guillotine).scaleY,_t=function(){return $ instanceof s&&$.value0.width!==0?Ss({scaleX:(J.xMax-st)/$.value0.width,scaleY:Z})(J.guillotine):J.guillotine}();return a(i(W)(_t))(function(ct){return c({xMax:J.xMax,guillotine:ct})})})})}},containsPoint:function(W){return function(J){return p(W)(J.guillotine)}},draw:function(W){return function(J){return m(W)(J.guillotine)}},dragStart:function(W){return function(J){return a(h(W)(J.guillotine))(function(st){return c({xMax:J.xMax,guillotine:st})})}},drag:function(W){return function(J){return R(iv(t))(J.guillotine.dragOffset)(W)(J)}},dragEnd:function(W){return a(L(W.guillotine))(function(J){return c({xMax:W.xMax,guillotine:J})})}}},cv=function(t){var e=t.Monad0(),n=Pl(e),r=Ft(n),u=e.Bind1(),a=C(u),o=Dt(n),l=iv(t),i=Dt(l),f=Po(t),c=f(ou(t)),p=Dt(c),m=f(hu(t)),h=Dt(m),R=ky(u),L=Ys(t),W=e.Applicative0(),J=D(W),st=u.Apply0().Functor0(),$=v(st),Z=jp(W),_t=Tn(st),ct=Lt(_t),rn=Ht(n),On=Ht(l),dr=Ht(m),vc=Ht(c),sv=wt(_t),dv=$t(n),pv=te(W),vv=qt(n);return{position:function(mt){return r(mt.overlayBackground)},translate:function(mt){return function(ut){return a(o(mt)(ut.overlayBackground))(function(Wu){return a(i(mt)(ut.guillotine))(function(mv){return a(p(mt)(ut.author))(function(_v){return a(h(mt)(ut.title))(function(mc){return R(L(Gi(function(Uu){return Uu-mt.translateX}))(mc))(function(){return R(L(Gi(function(Uu){return Uu-mt.translateX}))(ut.bodyText))(function(){return J({overlayBackground:Wu,guillotine:mv,author:_v,bodyText:ut.bodyText,title:mc})})})})})})})}},containsPoint:function(mt){return function(ut){return $(zy)(Z(ct(mt))([rn(ut.overlayBackground),On(ut.guillotine),dr(ut.bodyText),vc(ut.author),dr(ut.title)]))}},draw:function(mt){return function(ut){return fc(Jy(sv(mt))([rn(ut.overlayBackground),On(ut.guillotine),dr(ut.bodyText),vc(ut.author),dr(ut.title)]))}},dragStart:function(mt){return function(ut){return a(dv(mt)(ut.overlayBackground))(function(Wu){return J({guillotine:ut.guillotine,bodyText:ut.bodyText,author:ut.author,title:ut.title,overlayBackground:Wu})})}},drag:function(mt){return function(ut){return pv(cv(t))(ut.overlayBackground.dragOffset)(mt)(ut)}},dragEnd:function(mt){return a(vv(mt.overlayBackground))(function(ut){return J({guillotine:mt.guillotine,bodyText:mt.bodyText,author:mt.author,title:mt.title,overlayBackground:ut})})}}},Vy=Ht(vp(Tt)(ed(cv(Xt))(Tt))),N=2;var jy={width:1080,height:1920},dc=Xp({width:N,height:N})(jy),Gp=function(){return dc.height}(),Vp=function(){return dc.width}();var Xy=function(t){var e=t.Monad0(),n=C(e.Bind1()),r=ei(t),u=D(e.Applicative0());return function(a){return function(o){return function(l){return function(i){return n(r(a)(o)(l)(Je.value))(function(f){return u({guillotine:f,xMax:i})})}}}}},Yy=Xy(Xt),Qy=function(){return{width:1080,height:1080*5/4}}(),pc=function(){return Xp({width:2*N,height:N})(Qy)}(),qn=function(){return pc.height}(),Et=function(){return pc.width}(),Ky=fc(function(){var e=ac("canvas-story")(dc)();if(e instanceof s){var n=Qn(e.value0.canvas)(),r=Kr(re)(Yp({x:0,y:0})({scaleX:1,scaleY:1})(Je.value))();ic(e.value0)("image")(r)(Bt)(),Qp(e.value0)("image-size-story")(r)();var u=Kr(re)(ua("./img/guillotinewit2x.png")({x:60*N,y:60*N})({scaleX:1,scaleY:1})(Je.value))(),a=Kr(re)(ua("./img/jacobinlogowit80x200.png")({x:Et/2-100*N,y:Gp-160*N})({scaleX:1,scaleY:1})(Je.value))(),o={x:60*N,y:250*N},l=re({text:[],lineHeight:.9,position:o,maxWidth:new s(Vp-2*60*N),fillStyle:"#fff",font:{name:"Oswald",style:{normal:"normal",italic:"italic"},weight:{normal:"700",bold:"700"},size:100*N},align:ie.value,baseline:Ie.value,letterSpacing:"-2px",emptyLineHeight:.25,dragOffset:d.value,context:n})();oa(e.value0)("title-left")(l)(jo)(),Nu(e.value0)("title-size-story")(l)();var i=re({text:"AUTEUR",lineHeight:.95,position:o,fillStyle:"#fff",fontName:"Oswald",fontStyle:"normal",fontWeight:"500",fontSize:N*50,align:ie.value,baseline:Ee.value,letterSpacing:"-3px",dragOffset:d.value,maxWidth:d.value,context:n})();Su(e.value0)("author")(i)(ru)(),aa(e.value0)("color")(l)(ki)(),aa(e.value0)("color")(i)(Di)(),Qr(e.value0)("color")(a)(function(R){if(R==="#fff")return Bt("./img/jacobinlogowit80x200.png");if(R==="#f00")return Bt("./img/jacobinlogo80x200.png");if(R==="#000")return Bt("./img/jacobinlogozwart80x200.png");if(R==="#fff")return Bt("./img/jacobinlogowit80x200.png");throw new Error("Failed pattern match at Jacobin.TitleSlide (line 410, column 56 - line 414, column 68): "+[R.constructor.name])})(),Qr(e.value0)("color")(u)(function(R){return Bt(R==="#fff"?"./img/guillotinewit2x.png":R==="#f00"?"./img/guillotine2x.png":R==="#000"?"./img/guillotinezwart2x.png":"./img/guillotinewit2x.png")})();var f=di(o.y)(50*N)(Kl([Kp(l),Zp(i)])),c=re(si({offsetX:0,offsetY:0})("#555")(15)(So([Pu(Hn(a)),nv(Vi(f)),Pu(Hn(u))])))();lc(e.value0)("shadow")(c)(function(R){return fi(function(){return R?"#555":"#0000"}())})();var p=So([ov(c),av(r),uv(Hn(ii({x:0,y:0,width:Vp,height:Gp})("#f00")))]),m=lv(e.value0)(p)();ye(m)(),cc(m)();var h=kp("download-story")("jacobin-story.png")(m)();if(h instanceof s)return void 0;throw new Error("Failed pattern match at Jacobin.TitleSlide (line 448, column 3 - line 448, column 75): "+[h.constructor.name])}throw new Error("Failed pattern match at Jacobin.TitleSlide (line 348, column 3 - line 348, column 83): "+[e.constructor.name])}),Zy=fc(function(){var e=ac("canvas-title-slide")(pc)();if(e instanceof s){var n=Qn(e.value0.canvas)(),r=Kr(re)(Yp({x:0,y:0})({scaleX:1,scaleY:1})(Je.value))();ic(e.value0)("image")(r)(Bt)(),Qp(e.value0)("image-size")(r)();var u=Yy("./img/guillotine2x.png")({x:Et/2+285*N,y:60*N})({scaleX:(Et-180*N-(Et/2+285*N))/1560,scaleY:1})(Et-180*N)(),a=Kr(re)(ua("./img/guillotinewit2x.png")({x:60*N,y:60*N})({scaleX:1,scaleY:1})(Je.value))(),o=ua("./img/jacobinlogo80x200.png")({x:Et-100*N,y:qn-160*N})({scaleX:1,scaleY:1})(Je.value)(),l=Kr(re)(ua("./img/jacobinlogowit80x200.png")({x:Et/2-100*N,y:qn-160*N})({scaleX:1,scaleY:1})(Je.value))(),i=re({text:[],lineHeight:1.1,position:{x:Et-N*60,y:N*150},fillStyle:"#f00",font:{name:"Oswald",style:{normal:"normal",italic:"italic"},weight:{normal:"500",bold:"700"},size:90*N},align:bn.value,baseline:Ee.value,letterSpacing:"-3px",emptyLineHeight:.25,dragOffset:d.value,maxWidth:new s(Et/2-2*60*N),context:n})();oa(e.value0)("bodytext")(i)(jo)(),Nu(e.value0)("bodytext-size")(i)();var f={x:60*N,y:250*N},c=re({text:[],lineHeight:.9,position:f,maxWidth:new s(Et/2-2*60*N),fillStyle:"#fff",font:{name:"Oswald",style:{normal:"normal",italic:"italic"},weight:{normal:"700",bold:"700"},size:100*N},align:ie.value,baseline:Ie.value,letterSpacing:"-2px",emptyLineHeight:.25,dragOffset:d.value,context:n})();oa(e.value0)("title-left")(c)(jo)(),Nu(e.value0)("title-size")(c)();var p=re({text:"AUTEUR",lineHeight:.95,position:f,fillStyle:"#fff",fontName:"Oswald",fontStyle:"normal",fontWeight:"500",fontSize:N*50,align:ie.value,baseline:Ee.value,letterSpacing:"-3px",dragOffset:d.value,maxWidth:d.value,context:n})();Su(e.value0)("author")(p)(ru)();var m=di(f.y)(50*N)(Kl([Kp(c),Zp(p)])),h=re({text:"AUTEUR",lineHeight:.95,position:{x:Et/2+128*N,y:qn-160*N},fillStyle:"#f00",fontName:"Oswald",fontStyle:"normal",fontWeight:"400",fontSize:2*50,align:ie.value,baseline:Ie.value,letterSpacing:"-3px",dragOffset:d.value,maxWidth:d.value,context:n})();Su(e.value0)("author")(h)(function(ct){return ru(La(ct))})();var R=re({text:[],lineHeight:.9,position:{x:Et/2+128*N,y:qn-160*N},maxWidth:new s(Et/2-(128+2*60+20)*N),fillStyle:"#f00",font:{name:"Oswald",style:{normal:"normal",italic:"italic"},weight:{normal:"700",bold:"700"},size:50*N},align:ie.value,baseline:Ee.value,letterSpacing:"-2px",emptyLineHeight:.25,dragOffset:d.value,context:n})();oa(e.value0)("title-right")(R)(jo)(),aa(e.value0)("color")(c)(ki)(),aa(e.value0)("color")(p)(Di)(),Qr(e.value0)("color")(l)(function(ct){if(ct==="#fff")return Bt("./img/jacobinlogowit80x200.png");if(ct==="#f00")return Bt("./img/jacobinlogo80x200.png");if(ct==="#000")return Bt("./img/jacobinlogozwart80x200.png");if(ct==="#fff")return Bt("./img/jacobinlogowit80x200.png");throw new Error("Failed pattern match at Jacobin.TitleSlide (line 292, column 61 - line 296, column 68): "+[ct.constructor.name])})(),Qr(e.value0)("color")(a)(function(ct){return Bt(ct==="#fff"?"./img/guillotinewit2x.png":ct==="#f00"?"./img/guillotine2x.png":ct==="#000"?"./img/guillotinezwart2x.png":"./img/guillotinewit2x.png")})();var L=Kf({x:Et/2+60*N,y:0})({width:Et,height:qn})(82.5)("#fff"),W=Zs(Et/2)(60*N)({overlayBackground:L,guillotine:u,bodyText:i,author:h,title:R}),J=re(si({offsetX:0,offsetY:0})("#555")(15)(So([Pu(Hn(l)),nv(Vi(m)),Pu(Hn(a))])))();lc(e.value0)("shadow")(J)(function(ct){return fi(function(){return ct?"#555":"#0000"}())})();var st=So([Gy(Hn(o)),Vy(gp(W)),ov(J),av(r),uv(Hn(ii({x:0,y:0,width:Et,height:qn})("#f00")))]),$=lv(e.value0)(st)();ye($)(),cc($)();var Z=uc("download-left")("jacobin-titel-links.png")({x:0,y:0,width:Et/2,height:qn})($)();if(Z instanceof s){var _t=uc("download-right")("jacobin-titel-rechts.png")({x:Et/2,y:0,width:Et/2,height:qn})($)();if(_t instanceof s)return void 0;throw new Error("Failed pattern match at Jacobin.TitleSlide (line 343, column 3 - line 343, column 173): "+[_t.constructor.name])}throw new Error("Failed pattern match at Jacobin.TitleSlide (line 342, column 3 - line 342, column 155): "+[Z.constructor.name])}throw new Error("Failed pattern match at Jacobin.TitleSlide (line 153, column 3 - line 153, column 84): "+[e.constructor.name])}),fv=pe(Pa)(Zy)(Ky);fv();})();
